\documentclass[10pt,a4paper,twoside]{scrreprt}
\usepackage[french]{babel} 

\usepackage{classicthesis-ldpkg} 
\usepackage[eulerchapternumbers,%drafting,%pdfspacing,%
            subfig,eulermath,parts]{classicthesis}
\pagestyle{headings}

\addtolength{\voffset}{9mm}   %>>> moves text field down
\usepackage[latin1]{inputenc}   % Encodage ISO-8859-1.
\usepackage{graphicx}
\graphicspath{{images/}} 
\newcommand{\keyevidence}[1]{\fbox{#1}}

\usepackage{pgf}

\usepackage{listings} 
\usepackage{makeidx}
\lstdefinelanguage{FIDOCAD} 
	{morekeywords={LI,PP,PV,TY,TE,MC,EV,EP,RP,RV,BE,SA,PA,PL,FCJ,%
		[FIDOCAD],[FIDOLIB]}, 
	sensitive=false, 
	morecomment=[s]{[}{]}, 
	morecomment=[s][\color{blue}]{\{}{\}}, 
	morecomment=[l][\color{violet}]{*},
	moredelim=[il][\color{violet}]{£},
} 

\lstset{language=FIDOCAD,%
	basicstyle=\small\ttfamily} 

% *******************************************************
% Hyperreferences
% *******************************************************
\hypersetup{%
    colorlinks=true, linktocpage=true, pdfstartpage=3, pdfstartview=FitV,%
    breaklinks=true, pdfpagemode=UseNone, pageanchor=true, pdfpagemode=UseOutlines,%
    plainpages=false, bookmarksnumbered, bookmarksopen=true, bookmarksopenlevel=1,%
    hypertexnames=true, pdfhighlight=/O,%hyperfootnotes=true,%nesting=true,%frenchlinks,%
    urlcolor=webbrown, linkcolor=RoyalBlue, citecolor=webgreen, %pagecolor=RoyalBlue,%
    % uncomment the following line if you want to have black links (e.g., for printing)
    %urlcolor=Black, linkcolor=Black, citecolor=Black, %pagecolor=Black,%
    pdftitle={FidoCadJ -- manuel de l'utilisateur},%
    pdfauthor={Davide Bucci},%
    pdfsubject={Comment utiliser FidoCadJ},%
    pdfkeywords={FidoCad, FidoCadJ, CAO, schémas électriques, circuits imprimés},%
    pdfcreator={pdfLaTeX},%
    pdfproducer={LaTeX with hyperref and classicthesis}%
}
\lstset{frame=single,%
	}

\newcommand{\micron}{\,\mu\mathrm{m}}

\title{\Huge\color{webbrown} FidoCadJ 0.23.1 \\ le manuel de l'utilisateur} 


\author{Davide Bucci\\[3em]
\includegraphics[width=.7\textwidth]{icona_fidocadj_a}
}

 \makeindex


\begin{document} 
\pagenumbering{roman}

\pdfbookmark[1]{Front}{Front}
\maketitle 

\clearpage
\pdfbookmark[1]{Licence}{Licence}
Cette oeuvre est sujette à la Creative Commons Public License version 3.0 
ou plus recente. L'énoncé intégral de cette licence est disponible à l'adresse\\
\href{http://creativecommons.org/licenses/by-nc-nd/3.0/deed.fr}{http://creativecommons.org/licenses/by-nc-nd/3.0/deed.fr}. 
 
 Vous êtes libres de reproduire, distribuer, communiquer ou exposer à un publique, représenter, exécuter et réciter cette oeuvre aux conditions suivantes: 
\begin{description}
\item[Attribution]{Vous devez citer le nom de l'auteur original de la manière indiquée par l'auteur de l'oeuvre ou le titulaire des droits qui vous confère cette autorisation (mais pas d'une manière qui suggérerait qu'ils vous soutiennent ou approuvent votre utilisation de l'oeuvre).}
\item[Non commercial]{Vous n'avez pas le droit d'utiliser cette création à des fins commerciales.}
\item[Pas d'oeuvres dérivées]{CVous n'avez pas le droit de modifier, de transformer ou d'adapter cette création. Chaque fois que l'on utilise ou on distribue cette oeuvre, il faut le faire selon les termes de cette licence, qui doit être communiquée avec clarté.}
\end{description}
Chacune de ces conditions peut être levée si vous obtenez l'autorisation du titulaire des droits sur cette oeuvre (Davide Bucci). 
\vfill

Les noms commerciaux, les logos, les marques déposées appartiennent aux propriétaires respectifs.



\begingroup
%\let\clearpage\relax
%\let\cleardoublepage\relax
%\let\cleardoublepage\relax


\chapter*{Résumé}

\pdfbookmark[1]{Résumé}{Résumé}
Ce document est le manuel officiel de FidoCadJ. Après une brève présentation de l'histoire de ce logiciel et de sa philosophie, nous allons voir les notions principales nécessaires pour dessiner un simple schéma électrique et un circuit imprimé. Ce manuel s'achève avec des détails techniques peu documentés jusqu'à présent, comme la description complète du format de fichier utilisé par FidoCad et par conséquence par FidoCadJ.

\endgroup			



\chapter*{Remerciements}
\pdfbookmark[1]{Remerciements}{Remerciements}

Beaucoup de personnes ont utilisé le logiciel (ou une de ses versions préliminaires) et il m'ont fait parvenir leur impressions. Je veux donc remercier ici pour leur conseils les assidus du groupe de discussion\index{groupe de discussion} it.hobby.elettronica\index{it.hobby.elettronica}.
Ce logiciel a été testé sous Linux grâce la patience de Stefano Martini, qui a été un fin chercheur de bogues. En outre, je veux remercier Olaf Marzocchi et Emanuele Baggetta pour leur tests sous MacOSX.

Je remercie F. Bertolazzi pour m'avoir motivé à faire en sorte que le logiciel soit utilisable et qui a assemblé avec patience la librairie CadSoft Eagle permettant l'exportation vers ce logiciel. Je remercie Celsius, qui a testé le fonctionnement du logiciel pour la réalisation de circuits imprimés et les librairies, ainsi qu'Andrea D'Amore, pour ses conseils sur comment améliorer l'apparence du logiciel sous Apple Macintosh, à partir de la version 0.21.1. Un merci à Roby IZ1CYN, qui a écrit le paragraphe~\ref{installazione_linux} de ce manuel. Je remercie aussi Pasu, qui a traduit tout ce manuel en anglais, pour favoriser la diffusion de ce logiciel. Il m'a aussi aidé à trouver plusieurs fautes dans la version anglaise de l'interface.

\chapter*{Note pour la version française du logiciel}
\pdfbookmark[1]{Note pour la version française du logiciel}{Note pour la version française du logiciel}

FidoCadJ est un logiciel qui est né au sein d'une communauté italienne d'utilisateurs. Cependant, j'habite en France depuis un certain nombre d'années et j'ai choisi de faire un effort pour traduire le logiciel en français. 
Comme mon temps est limité, vous pouvez constater que pas tout a été traduit complètement. Par exemple, les figures de ce manuel se réfèrent en grande partie à la version italienne. Plus urgent, la librairie standard utilise plusieurs fois des descriptions en italien pour les symboles qu'il contient.

Je lance donc un appel à la communauté francophone: si vous repérez une erreur de traduction dans ce manuel, ou vous voulez participer à cette aventure, n'hésitez pas à me contacter. Je serai très heureux de recevoir de l'aide, afin que FidoCadJ commence à se diffuser aussi en France.

\chapter*{Licence FidoCadJ}
\pdfbookmark[1]{Licence FidoCadJ}{Licence FidoCadJ}

 
Copyright \copyright\ 2007-2010  Davide Bucci \href{mailto:davbucci@tiscali.it}{davbucci@tiscali.it}
        
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, version 3 of the License.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see \href{http://www.gnu.org/licenses/}{http://www.gnu.org/licenses/}.

\tableofcontents
\pdfbookmark[1]{Table des matières}{Table des matière}

\listoffigures
\pdfbookmark[1]{Liste des figures}{Liste des figures}

\begingroup
\let\clearpage\relax
\let\cleardoublepage\relax
\let\cleardoublepage\relax
\listoftables
\pdfbookmark[1]{Liste des tableaux}{Liste des tableaux}

\endgroup

\myChapter{Introduction}
\pagenumbering{arabic}
Dans ce chapitre, nous allons présenter rapidement FidoCadJ. En particulier, nous allons ré-parcourir la philosophie qui est à la base de ce logiciel, ainsi que l'histoire de sa création et son développement.

\section{La philosophie de FidoCadJ}

FidoCad\index{FidoCad} (sans la J à la fin du mot) est un logiciel de dessin vectoriel, particulièrement adapté à être utilisé pour tracer des schémas électriques et des circuits imprimés. Il s'est diffusé particulièrement dans la communauté Usenet italienne, à partir de la fin des années 1990. Il peut être téléchargé gratuitement (en version pour Windows\index{Windows}) depuis la page de son auteur, Lorenzo Lutti\index{Lorenzo Lutti}:

\href{http://www.enetsystems.com/~lorenzo/fidocad.asp}{http://www.enetsystems.com/~lorenzo/fidocad.asp}

Le fichier généré par ce logiciel contient seulement des codes en format texte et est très compacte. Ce détail le rend très adapté à être utilisé comme format d'échange dans les messages des groupes de discussion quand des dessins sont nécessaires.
Malheureusement, FidoCad existe seulement dans la version pour Windows\index{Windows}. Qui utilise Linux\index{Linux} peut utiliser  WInE\index{WInE} pour sortir de l'impasse, mais qui utilise un Macintosh doit trouver une solution alternative. J'ai voulu donner une petite contribution, en écrivant FidoCadJ (avec la J à la fin, cette fois). Cet éditeur est écrit en Java\index{Java}, est complètement multi-plateforme et permet de visualiser et de modifier les dessins en format FidoCad\index{FidoCad}.

Qui a déjà utilisé FidoCad\index{FidoCad} dans le passé devrait se trouver rapidement à son aise avec FidoCadJ, car la majorité des commandes sont très similaires. Naturellement, les fonctionnalités de FidoCadJ sont moins développées que celles de FidoCad\index{FidoCad}, en étant ce dernier développé depuis plus longtemps. En particulier, la gestion des libraires et des macros\index{macro} est très essentielle.
Mon but a été de fournir une solution minimaliste aux exigences de dessin et de projet de petits circuits. Le tout en respectant la philosophie du logiciel originel, qui est de fournir un outil simple et essentiel.

Bien évidemment, mon but a été d'arriver à une compatibilité totale à niveau des fichiers générés  par FidoCadJ et FidoCad\index{FidoCad} pour Windows\index{Windows}.

Parmi mes intérêts, on trouve la typographie à l'ordinateur et en particulier le logiciel \LaTeX. Pour cette raison, FidoCadJ permet (et ceci à différence de FidoCad) de réaliser l'exportation d'un dessin en plusieurs formats vectoriel et entre autre en Postscript encapsulé (connu aussi comme \textsc{EPS}\index{EPS}). Une autre possibilité intéressante qui est mise à disposition à partir de la version 0.21 de FidoCadJ est l'exportation de schémas électriques vers des scripts exécutables par CadSoft Eagle\index{CadSoft Eagle}. \`A partir de la version 0.22, FidoCadJ permet d'exporter vers le format \textsc{PDF}\index{PDF}.

\section{Histoire du logiciel}
Je suis passionné d'électronique depuis beaucoup de temps.
Quand j'ai commence à fréquenter des groupes de discussion \index{newsgroup} Usenet\index{Usenet} italiens, je me suis aperçu que la majorité des schémas électriques était fournis en utilisant le format du logiciel FidoCad pour Windows\index{FidoCad}, au lieu que faire des graphismes ASCII.
N'utilisant plus Windows depuis plusieurs années, j'ai voulu faire un effort pour combler cette lacune.\graffito{De toute façon, je pense qu'il vaut mieux se mettre à l'oeuvre, plutôt que se plaindre continûment que sous un système d'exploitation alternatif à Windows\index{Windows} il n'y a pas tel ou tel autre programme.}

La première chose que j'ai faite a été d'étudier en détail le format utilisé par FidoCad\index{FidoCad} et écrire une appliquette Java\index{Java}, appelée FidoReadJ\index{FidoReadJ}, capable d'interpréter et de montrer un circuit à l'intérieur d'une page web.
J'ai donc fait pas mal de <<reverse engineering>> et j'ai cherché un peu partout pour me rendre compte des possibilités et des limitations du format. J'ai aussi téléchargé et étudié les sources en C++ (très lisibles et propres) de FidoCad, mises à disposition par Lorenzo Lutti.
Tout ceci avait lieu plus ou moins vers mars 2007. Quelques mois plus tard, l'appliquette était en ligne sur mon site et était en train d'être utilisée et testée à fond par une partie de la communauté qui fait partie des groupes it.hobby.elettronica\index{it.hobby.elettronica} et it.hobby.fai-da-te\index{it.hobby.fai-da-te}.\footnote{FidoReadJ\index{FidoReadJ} est toujours à disposition, bien que pas complètement à jour, à l'adresse:\\ \href{http://davbucci.chez-alice.fr/index.php?argument=elettronica/fidoreadj/fidoreadj.inc\&language=Francais}{http://davbucci.chez-alice.fr/index.php?argument=elettronica/fidoreadj/fidoreadj.inc}.}

En disposant désormais d'un interprète\index{interprète}\graffito{En réalité, il était depuis 1993 que j'avais l'idée d'écrire un petit logiciel de dessin vectoriel 2D.} du format, le travail qui restait était de mettre à point l'interface utilisateur.
La plus grande partie du travail a été réalisé en plusieurs étapes, entre janvier et juillet 2008. FidoCadJ n'est donc pas une adaptation ou un <<porting>> de FidoCad pour Windows\index{FidoCad}, mais plutôt une ré-écriture totale du logiciel. À partir de la version 0.21, apparue en janvier 2009, FidoCadJ met à disposition des extensions au format FidoCad originel. Beaucoup d'attention a été faite pour que une compatibilité à l'arrière soit maintenue.

Mon choix d'utiliser Java\index{Java} a été motivé par le fait que dans ces derniers années j'ai changé plusieurs systèmes d'exploitation et d'architectures différentes. Je ne voulais donc pas me lier de façon indissoluble à un système en particulier. Pour cette raison, l'effort d'apprendre le framework Cocoa\index{Cocoa} aurait probablement été contrebalancé par un aspect bien meilleur du logiciel sous MacOSX\index{MacOSX}, mais il aurait rendu FidoCadJ non portable. Finalement, je ne suis pas du tout un informaticien et le temps que je passe à apprendre le langage à la mode à un instant donnée je ne le passe pas à faire de l'électronique.

Pour le reste, une simple analyse de la structure du code source de FidoCadJ révèle que je ne suis pas du tout un puriste de Java\index{Java} et de la programmation à objets\index{programmation à objets}. Beaucoup de solutions sont plus pragmatiques que élégantes.

Ce qui compte, plus que le choix d'un langage ou un autre, est l'impression d'utilisation que l'utilisateur a du produit fini. Pour cette raison, je suis toujours à  l'écoute de vos suggestions, pour identifier les directions où il faut améliorer FidoCadJ.
Pour résumer, je ne crois pas que Java\index{Java} soit la panacée de tous les maux et non plus un langage parfait.
Je crois par contre qu'il est dénigré par beaucoup de personnes parce qu'il y a beaucoup de logiciels de mauvaise qualité qui ont été écrits en ce langage.
Sans avoir des prétention de perfection et en restant dans le contexte de mes possibilités informatiques, je veux faire en sorte que FidoCadJ NE soit PAS un logiciel de mauvaise qualité.
Encore une fois, je suis à votre écoute!

Depuis novembre 2009, j'ai ouvert un projet FidoCadJ sur SourceForge. Depuis cette page, on peut télécharger les exécutables, ainsi que les manuels de FidoCadJ. Vous pourrez aussi participer activement au développement du logiciel, en accedant au code source, éventuellement avec Subversion, ou le navigateur SVN offert par SourceForge:

 \href{http://fidocadj.svn.sourceforge.net/viewvc/fidocadj/}{http://fidocadj.svn.sourceforge.net/viewvc/fidocadj/} 

Pour participer au développement de FidoCadJ, pas besoin d'être des programmateurs experts: si vous le souhaitez, vous pourrez par exemple traduire le logiciel dans une langue différente de celles disponibles actuellement. Vous pourrez aussi lire avec attention les manuels et corriger les fautes de langue, des inconsistance ou erreurs. Vous pourrez aussi analyser la cohérence et préparer une traduction de la librairie standard.
Vous pouvez aussi participer aux forums, écrire un commentaire sur le logiciel, suggérer des améliorations ou des bogues à corriger.

\myChapter{Le dessin avec FidoCadJ}

L'utilisation du logiciel devrait être plutôt intuitive pour qui a déjà utilisé un outil de dessin vectoriel\index{dessin vectoriel}.
L'aspect du logiciel sous MacOSX\index{MacOSX} est visible dans la figure~\ref{fig_fidocadj};\graffito{Les utilisateurs Mac invétérés remarquerons les menus sont à leur place.}.
Sous d'autres systèmes il y a quelques détails qui changent, mais la philosophie reste strictement la même. La figure~\ref{fig_metal} montre par example le résultat que l'on obtient en utilisant le <<look and feel>> Metal\index{Metal}, préconisé par Sun\index{Sun}. Nous allons voir quels sont les fonctionnalités et les éléments\index{élément} de dessin offerts. Ce derniers sont les fonctions géométriques de base, à partir desquelles chaque dessin FidoCadJ peut être obtenu.
\begin{figure}
\includegraphics[width=\textwidth]{fidocadj_macosx_fr.png}
\caption{Une session de travail typique de FidoCadJ sous MacOSX Tiger\index{MacOSX}. Le logiciel est localisé en langue française. Dans l'appendice~\ref{specifics}, nous allons décrire les particularités de la version spécifique pour Macintosh\index{Macintosh}.}
\label{fig_fidocadj}
\end{figure}

\begin{figure}
\includegraphics[width=\textwidth]{fidocadj_metal.png}
\caption{Comment se présente FidoCadJ avec le <<look and feel>> Metal\index{Metal}.}
\label{fig_metal}
\end{figure}

\section{Les instruments de dessin}
Dans la barre des commandes\index{barre des commandes} (en haut dans la fenêtre du logiciel), on peut trouver des boutons qui permettent de créer et modifier un dessin. Le tableau~\ref{tab_comandi} montre un résumé rapide des commandes disponibles et décrit les actions qui sont possibles pour chaque commande. Chaque bouton de la barre des commandes reste enfoncé, une fois que l'on a fait click dessus.\graffito{Un peu ce qui se faisait dans les radios anciennes et les commutateurs des années 1970.}

Il est donc possible entre autre de sélectionner quel élément de dessin\index{élément de dessin} nous allons introduire.\footnote{Pour avoir plus d'informations sur le code associé à chaque élément pendant sa mémorisation, vous pouvez consulter le paragraphe~\ref{sec_primitive}.} En haut à droite, une liste actionnable avec un click montre la couche de dessin activée, ainsi que les autres disponibles (la description de la fonction des couches se trouve au paragraphe~\ref{sec_layer}).

L'aspect de la barre des commandes\index{barre des commandes} est partiellement personnalisable. Cet élément se trouve juste en dessous de la barre du titre des fenêtres, comme l'on peut voir dans les figures~\ref{fig_fidocadj} et \ref{fig_metal}. En particulier, l'utilisateur peut choisir deux tailles d'icônes, et aussi peut cacher le texte. Cette dernière possibilité permet d'économiser la place sur l'écran pour la fenêtre du logiciel.
Ces aspects de configuration du logiciel sont disponibles dans la fenêtre qui s'active dans le menu <<Vue/Préférences>>\footnote{Sauf sous MacOSX, où cette entrée se trouve dans le menu <<FidoCadJ>>.}. Les modifications seront activées en redémarrant FidoCadJ, car à priori il ne s'agit pas de quelque chose qui doit être changée tout le temps.


\begin{table}
\centering
\begin{tabular}{clp{.7\textwidth}}
\toprule
Touche
&
Commande
&
Utilisation
\\
\midrule

\keyevidence{A} ou \keyevidence{Espace}
&

\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/arrow}%
}
 \textsc{Selection}\index{selection}
&
Sélection d'un ou plusieurs éléments graphiques. Appuyer sur \keyevidence{Control} (ou \keyevidence{Command} sous MacOSX) pour faire des sélections multiples, ou de-sélectionner un élément.
Faire click et glisser la souris en gardant appuyée la touche, pour sélectionner plusieurs éléments dans une surface rectangulaire.
Appuyer sur \keyevidence{R} pour faire pivoter les éléments sélectionnés.
Appuyer sur \keyevidence{S} pour appliquer un effet miroir.
Un double click sur un élément en montre les caractéristiques.
\\

&
\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/magnifier}%
}
\textsc{Zoom}\index{zoom}
&
Faire click avec la touche gauche de la souris pour augmenter l'agrandissement.
Faire click avec la touche droite pour le réduire.
\\

&
\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/move}%
}
\textsc{Bouge}\index{bouge}
&
Faire click et déplacer la souris pour faire bouger la partie du dessin montrée.
\\

\keyevidence{L}
&
\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/line}%
}
\textsc{Ligne}\index{ligne}
&
Introduire une ligne, ou une série de lignes. Appuyer sur \keyevidence{Esc}, ou faire double click pour en terminer l'introduction.\\
\keyevidence{T}
&
\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/text}%
}
\textsc{Texte}\index{texte}
&
Introduire une ligne de texte.
\\
\keyevidence{B}
&
\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/bezier}%
}
\textsc{Bézier}\index{Bézier}
&
Dessiner une courbe de Bézier.
\\

\keyevidence{P}
&
\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/polygon}%
}
\textsc{Polygone}\index{polygone}
&
Dessiner un polygone plein ou vide. Faire double click, ou appuyer sur 
\keyevidence{Esc}, per terminer l'introduction des points.
\\

\keyevidence{E}
&
\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/ellipse}%
}
\textsc{Ellipse}\index{ellipse}
&
Dessiner une ellipse pleine ou vide (maintenir enfoncé \keyevidence{Control} pour obtenir un cercle).
\\

\keyevidence{G}
&
\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/rectangle}%
}
\textsc{Rectangle}\index{rectangle}
&
Dessiner un rectangle plein, ou vide.
\\
\keyevidence{C}
&
\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/connection}%
}
\textsc{Connexion}\index{connexion}
&
Dessiner une connexion électrique dans le schéma.
\\
\keyevidence{I}
&
\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/pcbline}%
}
\textsc{Piste C. I.}\index{piste c. i.}
&
Dessiner une piste de circuit imprimé. La largeur par défaut de la piste peut être modifiée dans la fenêtre <<Vue/Options dessin du circuit>>.
\\
\keyevidence{Z}
&
\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/pcbpad}%
}
\textsc{Pastille C. I.}\index{pastille c. i.}
&
Dessiner une pastille pour circuit imprimé. Les dimensions par défaut peuvent être modifiées dans la fenêtre <<Vue/Options dessin du circuit>>.
\\
\bottomrule
\end{tabular}
\caption{Résumé des commandes de dessin disponibles avec FidoCadJ. La touche montrée dans la colonne la plus à gauche permet de sélectionner rapidement depuis le clavier l'opération désirée. Un click avec la touche droite dans la modalité d'insertion des éléments permet d'afficher la fenêtre de modification des propriétés.}
\label{tab_comandi}
\end{table}

Sur la droite de la fenêtre principale, un arbre regroupe les éléments\index{macro} (appelés <<macros>>), mis à disposition par les librairies chargées dans le logiciel. Il suffit de sélectionner un élément de la librairie et ensuite faire click dans la zone de dessin pour l'insérer. Les librairies de FidoCad\index{FidoCad} contiennent à leur intérieur tous les symboles électriques classiques, ainsi qu'une bonne collection d'empreintes \index{circuit imprimé!empreintes} pour les circuits imprimés.
\`A partir de la version 0.22, un champ de texte avec une loupe est visible au dessus de la liste à arbre (voir en figure~\ref{fig_ricerca}). Taper du texte à son intérieur permet d'effectuer rapidement une recherche\index{recherche dans les librairies} d'un élément parmi ceux disponibles dans les librairies chargées. En utilisant ensuite les touches flèche haut/bas, on pourra naviguer parmi les éléments trouvés.

\begin{figure}
\centering
\includegraphics[width=.4\textwidth]{ricerca}
\caption{La possibilité de recherche à l'intérieur des librairies chargées.}
\label{fig_ricerca}
\end{figure}

\begin{figure}
\centering
\includegraphics[width=.7\textwidth]{param_testo}
\caption{La fenêtre des paramètres du texte en FidoCadJ}
\label{fig_param_testo}
\end{figure}

La figure~\ref{fig_param_testo} montre un exemple de ce que l'on obtient en faisant double click, en modalité sélection\index{sélection}, sur un élément du dessin; dans ce cas une ligne de texte. L'aspect de cette fenêtre ne va pas être strictement le même, selon quel élément graphique est en train d'être modifié.

\section{Dessinons un simple schéma électrique}
Pour comprendre comment le logiciel peut être utilisé, nous allons dessiner un simple schéma électrique, tel que celui montré en figure~\ref{fig_schema}.
\begin{figure}
\centering
%\includegraphics[width=.5\textwidth]{schema}
\input{images/schema.pgf}
\caption{Voici notre objectif: un miroir de courant réalisé avec des transistors NPN.}
\label{fig_schema}
\end{figure}
Pour commencer, nous pouvons démarrer FidoCadJ, ou créer un nouveau dessin avec l'option <<Fichier/Nouveau dessin>>.

Nous allons commencer donc par introduire dans le dessin les symboles des deux transistors\index{transistor}, qui représentent un peu le c\oe ur de notre schéma. Pour effectuer ceci, nous pouvons utiliser les macros mises à disposition par la librairie standard\index{librairie standard}, qui est chargée automatiquement et dont les éléments sont affichés sur la droite de la fenêtre.
La macro qui nous intéresse est appelé <<NPN sans écran>> et se trouve dans la catégorie <<Diodes et transistors>>, à l'intérieur de la <<Librairie standard>>. En faisant click pour sélectionner la macro\index{macro} désirée, il est ensuite possible de l'insérer à la position voulue dans le dessin (le logiciel en montre un aperçu) avec un deuxième click.
A cet instant, nous devrions nous trouver dans une situation similaire à celle montrée en figure~\ref{fig_fidocadj_fase1}.

\begin{figure}
\includegraphics[width=\textwidth]{fidocadj_fase1}
\caption{Commençons à positionner les deux transistors.}
\label{fig_fidocadj_fase1}
\end{figure}

Une chose que l'on peut remarquer tout de suite est que le transistor bipolaire sur la gauche n'est pas orienté de la façon correcte. Il suffit de faire click sur le bouton <<Sélectionner>>, dans la barre des outils, sélectionner le transistor avec la souris et appuyer sur la touche \keyevidence{S}. Les éléments sélectionnés apparaîtront marqués en vert. Le résultat que l'on va obtenir devrait être similaire à celui montré en figure~\ref{fig_fidocadj_fase2}.

\begin{figure}
\includegraphics[width=\textwidth]{fidocadj_fase2}
\caption{Nous pouvons sélectionner le transistor sur la gauche et le retourner avec \keyevidence{S}.}
\label{fig_fidocadj_fase2}
\end{figure}

En utilisant l'outil <<ligne>> dans la barre des outils\index{barre des outils}, nous pouvons compléter quelques connexions électriques, jusqu'à nous apercevoir d'avoir commencé le dessin un peu trop près des bords de la surface de dessin. Pas de problèmes: nous allons nous placer en modalité de sélection et faire click en haut à gauche, en déplaçant la souris jusqu'à en bas à droit, toujours en maintenant enfoncé la touche. Un rectangle vert apparaîtra, qui nous indiquera que nous sommes en train de sélectionner tous les éléments à son intérieur. Nous allons tout sélectionner, comme montré en figure~\ref{fig_fidocadj_fase3}. A ce point, toujours en modalité sélection, il suffit de faire click sur un élément sélectionné quelconque et déplacer la souris, pour déplacer tous les éléments dans la position souhaitée.

\begin{figure}
\includegraphics[width=\textwidth]{fidocadj_fase3}
\caption{Nous sommes trop en haut: nous pouvons tous sélectionner et déplacer ver le bas de la fenêtre.}
\label{fig_fidocadj_fase3}
\end{figure}

Nous allons donc continuer en introduisant les parties manquantes du circuit, en particulier une résistance\index{résistance} (Librairie standard/Composants discrets/Résistance), ainsi que le terminal d'alimentation positive (Librairie standard/Symboles de base/Terminal +).
Ce dernier devra être fait pivoter pour lui donner l'orientation souhaitée. Il suffira de le sélectionner et appuyer sur la touche \keyevidence{R}, jusqu'à obtenir le résultat souhaité. A ce point, nous devrions avoir quelque chose de similaire au résultat montré en figure~\ref{fig_fidocadj_fase4}.

\begin{figure}
\includegraphics[width=\textwidth]{fidocadj_fase4}
\caption{Le circuit, presque terminé.}
\label{fig_fidocadj_fase4}
\end{figure}

Ce qu'il manque maintenant est seulement le texte et la flèche qui représente le sens du courant. Pour cette dernière, il y a la macro <<Flèche>> dans <<Librairie standard/Symboles de base>>. Pour le texte, il faut utiliser le bouton <<Texte>>\index{Texte}, dans la barre des commandes, et faire click sur le dessin à la position où le texte devra apparaître. Un texte <<String>> apparaîtra et pourra être changé en y cliquant avec la touche droite de la souris.
Le nom et le modèle du transistor utilisé (en réalité, on utiliserait un couple de transistors sur le même substrat) sont spécifiés à l'intérieur des champs <<Name>> et <<Value>>, que l'on obtient en faisant double click en modalité <<Sélection>> sur la macro.\footnote{La possibilité d'associer un nom et une valeur à une macro, c'est à dire à un symbole d'un composant, représente une extension de FidoCadJ\index{FidoCadJ} par rapport à FidoCad\index{FidoCad}. Lire le paragraphe~\ref{FCJ_extension} pour avoir plus d'informations sur la compatibilité.} 
Vous pouvez voir en figure~\ref{fig_param_testo} le résultat. Une dimension de la police adaptée pour travailler avec les schémas est de 4 unités en vertical et 3 en horizontal.
Le circuit terminé est montré en figure~\ref{fig_fidocadj_fase5}.

\begin{figure}
\includegraphics[width=\textwidth]{fidocadj_fase5}
\caption{Voici le circuit terminé, dans toute sa splendeur.}
\label{fig_fidocadj_fase5}
\end{figure}

Pour les curieux, voici le code\index{code} textuel qui décrit le circuit, et qui pourra être copié à l'intérieur d'un message dans un groupe de discussion\index{groupe de discussion}, un message de courrier électronique\index{courrier électronique}, ou un forum\index{forum}. Pour le voir, il suffit de sélectionner <<Texte du circuit>>, dans le menu <<Circuit>>. \begin{lstlisting} 
[FIDOCAD]
MC 95 65 0 0 280
FCJ
TY 115 60 4 3 0 0 0 * Q1B
TY 115 65 4 3 0 0 0 * LM394
MC 55 65 0 1 280
FCJ
TY 20 60 4 3 0 0 0 * Q1A
TY 20 65 4 3 0 0 0 * LM394
LI 55 65 95 65 0
LI 40 75 40 95 0
LI 110 75 110 95 0
LI 40 40 40 55 0
MC 40 30 0 0 115
LI 40 15 40 30 0
LI 30 15 40 15 0
MC 30 15 2 0 010
LI 40 50 60 50 0
LI 60 50 60 65 0
SA 60 65 0
SA 40 50 0
LI 110 45 110 55 0
LI 110 35 110 40 0
LI 110 25 110 30 0
MC 40 95 0 0 040
MC 110 95 0 0 040
TY 45 30 4 3 0 0 0 * 10 k
TY 115 50 4 3 0 0 0 * I
MC 110 50 1 0 074
\end{lstlisting} 
Si vous voulez comprendre les détails de ce format, dans ce manuel il y a une description détaillée au chapitre~\ref{chap_formato}.

Vous n'êtes pas forcés à utiliser la fenêtre <<Texte du circuit>>; il suffit en fait de sélectionner la partie du circuit qui vous intéresse et la coller à l'intérieur du message: le code\index{code} apparaîtra de façon automatique.

\section{Les couches (layer)}
\label{sec_layer}

Une façon de se rendre compte de la fonction des couches\index{couches} est d'imaginer à un dessin fait sur des transparents pour rétro projecteur. Le résultat final est donné par une superposition de plusieurs transparents superposés. Chaque couche est distinguée par une couleur spécifique et on peut choisir si la représenter ou pas.
Cette façon d'agir est commune à beaucoup d'outils de dessin techniques ou électroniques, car il permet de représenter facilement plusieurs parties du circuit qui seront superposés par exemple dans un circuit imprimé\index{circuit imprimé}.

FidoCadJ permet d'utiliser 16 couches, numérotées de 0 à 15. La fonction de chaque couche est basé sur une convention et en particulier la couche 0 est utilisée pour les schémas électriques\index{schémas électriques}, la couche 1 pour les circuits, du côtés des soudures\index{soudures}, la couche 2 pour le cuivre côté composants et la couche 3 pour la sérigraphie\index{sérigraphie}.
Les couches qui restent ne sont pas associées à une fonction en particulier et peuvent être utilisées comme l'on souhaite. Le nom et la couleur\index{couleur} de chaque couche peuvent être spécifiés à travers le menu <<Vue/Options couches>>. Dans le même menu, on peut aussi décider si une couche doit être montrée à l'écran, ou pendant l'impression.

L'ordre des couches est important. En particulier, les couches d'ordre plus faible seront dessinées en premier. Des dessins présents sur les couches successives pourront donc couvrir ce qui se trouve dans les couches d'ordre faible.

\section{La grille}
L'unité logique\index{unité logique} utilisée par FidoCadJ est de 5 mils (127 microns) et l'on ne peut pas avoir des demi-unités, dans le sens où les coordonnées de chaque élément doivent toujours être entières.
Cela est suffisant à obtenir une résolution acceptable pour les schémas électriques et la plupart des circuits imprimés.

Pour noud rendre la vie plus facile, FidoCadJ peut utiliser une grille\index{grille} plus grossière, et faire en sorte que chaque opération faite avec la souris soit automatiquement alignée à cette grille.
Pour cette raison, deux boutons <<Montrer la grille>> et <<Bloquer sur la grille>> sont présents. Ils permettent de montrer les points qui font partie de la grille, et d'activer ou pas la fonction d'alignement automatique. Le pas de la grille peut être sélectionné à l'intérieur de la fenêtre activée avec le menu <<Vue/Options de dessin du circuit>>.

\section{Dessiner un simple circuit imprimé}
Pour prendre en main tous les concepts vus jusqu'à maintenant, la meilleure façon de procéder est de voir comment il faut procéder pour dessiner un circuit imprimé à l'aide de FidoCadJ.

À la différence d'autres programmes de CAO électrique qui sont sans doute très puissants, mais aussi plutôt difficiles à utiliser, FidoCadJ fournit en pratique une version électronique des vieux transférables R41\index{transférables R41}.
Bien évidemment, le fait de travailler à l'ordinateur permet de bénéficier de toute la flexibilité offerte par ce moyen.

Il faut néanmoins remarquer que le projet d'un circuit imprimé\index{circuit imprimé}, surtout si ce dernier est complexe, n'est pas une tâche très simple. \graffito{Le lecteur se fasse courage: un peu de raisonnements faits avec une feuille de brouillon, un stylo (et beaucoup de gommes) lui permettront à la fin d'avoir des idées plus précises avant de se mettre devant l'ordinateur et à la fin d'économiser du temps.}
Ils existent, certes, des placeurs automatiques\index{placeur automatique}, ainsi que des routeurs automatiques\index{routeur automatique} et ils promettent des miracles dans les brochures publicitaires des fournisseurs. Il est cependant encore un fait que le routage est un travail qui ne peut pas se passer de l'intelligence et de l'expérience de l'opérateur.
FidoCadJ fournit un éditeur rapide et immédiat pour dessiner des petits circuits imprimés à la portée d'un amateur. Nous allons voir rapidement comment il faut se comporter pour en obtenir un très simple, mais raisonnablement complet.

Ce que je conseille à qui désire effectuer ce travail est de se faire une idée suffisamment précise d'où placer les composants et les pistes principales avant de commencer. Le principe est de faire croiser le moins de connexions que possible\index{croiser les connexions}.

Nous allons tricher, et nous allons commencer directement du résultat que nous souhaitons obtenir, montré en figure~\ref{fig_amplificateur}. Il s'agit d'un simple amplificateur à un étage, réalisé autour d'un transistor bipolaire (BC547 ou similaires) monté à émetteur commun.
Pour comprendre la façon de travailler de FidoCadJ, il pourra être utile d'imaginer la plaque comme si elle était transparente, en la regardant du côté des composants. Pour cela, il est utile de travailler avec les sérigraphies\index{sérigraphie}, qui nous aideront à nous repérer, à partir du moment où il y aura plusieurs composants sur le circuit. Cela est un guide utile, même si souvent elle ne sera pas transférée sur la plaque lors d'une fabrication <<maison>>.

\begin{figure}
\centering
\includegraphics[width=.5\textwidth]{amplificateur}
\caption{Un très simple étage amplificateur à émetteur commun.}
\label{fig_amplificateur}
\end{figure}

La première chose que je conseille de faire est de disposer les composants, même de façon approximative. Dans notre cas, il faudra placer le transistor (bibliothèque <<PCB footprints/Semiconducteurs 3 pattes/TO92>>), les résistances (bibliothèque <<PCB footprints/Résistances/Résistance 1/W 0,4 i>>), les condensateurs électrochimiques (<<PCB footprints/Condensateurs électrochimiques/Vert. diam 5 pas 2,5>>).
Il peut être utile de marquer tout de suite la dimension totale souhaitée du circuit, en introduisant un rectangle vide sur la couche des sérigraphies (la 3). Pour effectuer cela, il suffit de se placer sur la couche souhaitée à travers la liste déroulante en haut à droite, et utiliser ensuite l'élément rectangle\index{rectangle} dans la barre des commandes.

Nous devrions obtenir plus ou moins le résultat montré en figure~\ref{fig_amplificateur_phase1}.

\begin{figure}
\includegraphics[width=\textwidth]{amplificateur_phase1}
\caption{Les composants sont placés sur la plaquette.}
\label{fig_amplificateur_phase1}
\end{figure}

Nous allons donc définir les régions couvertes de cuivre, qui iront nous fournir l'alimentation positive et négative. Pour réaliser cela, il va falloir utiliser des polygones\index{polygone}, en utilisant l'élément correspondant dans la barre des outils. Une fois rentrée chaque polygone, nous allons spécifier qu'il doit être plein, en faisant click droit sur une de ses côtés et en cochant l'option correspondante à l'intérieur de la fenêtre qui apparaîtra.
Faites attention aussi à travailler sur la couche\index{couche} correcte, c'est à dire la 1: c'est à dire le cuivre du côté des soudures.
L'utilisation d'un polygone pour les plans d'alimentation peut être utile pour disposer de connexions à basse impédance parasite. Avec un peu d'attention, normalement vous devriez avoir le résultat montré figure~\ref{fig_amplificateur_phase2}.\graffito{Attention à la largeur des pistes: ce qui a l'air d'être une autoroute sur l'écran, se révélera dans la réalité une fine ligne prête à se décoller pendant la soudure.}

\begin{figure}
\includegraphics[width=\textwidth]{amplificateur_phase2}
\caption{Nous avons rajouté les régions de masse et d'alimentation positive à l'aide de deux polygones\index{polygone}.}
\label{fig_amplificateur_phase2}
\end{figure}

Il faudra ensuite compléter les connexions électriques, en utilisant les éléments <<pistes c. i.>>\index{piste c. i.} (pistes pour circuit imprimé). J'ai choisi pour ce circuit une largeur de 10 unités (1,27~mm), qui est une largeur plutôt commode par exemple pour rendre faciles les soudures. 
\begin{figure}
\includegraphics[width=\textwidth]{amplificateur_phase3}
\caption{Nous avons rajouté les connexions de masse et l'alimentation positive, à l'aide de deux polygones\index{polygones}.}
\label{fig_amplificateur_phase3}
\end{figure}

Nous avons besoin de quelques connecteurs: pour pouvoir injecter le signal, ainsi que pour le récupérer et fournir l'alimentation au circuit. Nous allons utiliser une pastille prévue pour un condensateur au polyester, qui va probablement avoir la dimension correcte. FidoCadJ à la fin est une évolution des transférables Letraset\index{transférables Letraset}\dots

Nous rajoutons aussi des repères pour l'alimentation $+$ et $-$ du côté cuivre, avec un condensateur céramique en parallèle. Nous allons aussi rajouter l'écriture sur la partie supérieure de la plaque. Pour écrire sur le côté cuivre, il faudra sélectionner la couche correspondante et écrire en miroir\index{écrire en miroir}. Ceci est possible en accédant aux propriétés de l'élément, en faisant click avec la touche droite sur le texte à modifier.
Faites quelques essais pour obtenir les dimensions optimales de la police. Pour commencer, il est utile de garder un rapport approché de 3/4 entre les tailles horizontales et verticales des caractères\index{tailles des caractères}.
La figure~\ref{fig_amplificateur_phase4} montre le résultat obtenu avec des tailles de 11 unités en horizontal et 18 en vertical.

\begin{figure}
\includegraphics[width=\textwidth]{amplificateur_phase4}
\caption{Vioci le circuit imprimé\index{circuit imprimé}, presque terminé.}
\label{fig_amplificateur_phase4}
\end{figure}

À ce point, la seule chose qui manque est le texte avec les noms des composants, qui pourra être positionné sur la couche 3, qui est dédiée à la sérigraphie.
Une image de FidoCadJ qui montre le circuit terminé est visible en figure~\ref{fig_amplificateur_complet}.

\begin{figure}
\includegraphics[width=\textwidth]{amplificateur_complet}
\caption{Le travail terminé, avec toutes les sérigraphies.}
\label{fig_amplificateur_complet}
\end{figure}

Une fois le travail terminé, il faudra probablement imprimer\index{impression} le circuit sur calque, de façon à utiliser la photo incision\index{photo incision}, ou les méthodes de transfert direct du toner\index{transfert direct du toner}. Pour cette raison, seules les pistes de cuivre devront apparaitre lors de l'impression.
Pour obtenir ce résultat, il faudra en premier lieu cacher toutes les couches qui ne devront pas apparaître. Cela peut être fait à travers la fenêtre de dialogue qui apparaît en cliquant sur le menu <<Vue/Options des couches>>. Dans notre cas, il suffira de rendre invisible la couche 3, qui présente les sérigraphies. Le logiciel ira montrer donc seulement le cuivre de côté des soudures.

Il faudra donc imprimer ce que l'on montre à l'écran (SANS l'adapter à la page, bien évidemment, de façon à respecter les dimensions choisies), et sélectionner l'impression en noir et blanc. Il pourra être utile d'imprimer en miroir, si la technique que vous allez utiliser pour réaliser le circuit imprimé\index{circuit imprimé} le demande.

Comme notre circuit imprimé est relativement petit, à grandeur naturelle il sera imprimé dans un coin d'une feuille en format standard ISO-UNI A4\index{A4}, comme l'on peut voir en figure~\ref{fig_amplificateur_impression}.

\begin{figure}
\centering
\fbox{
\includegraphics[width=0.6\textwidth]{amplificateur_impression}}
\caption{Le circuit imprimé, tel qu'il apparaît imprimé en miroir sur une page en format ISO-UNI A4.}
\label{fig_amplificateur_impression}
\end{figure}

Si quelqu'un est curieux, voici le code du circuit imprimé que l'on vient d'obtenir dans les exemples ci dessus:
\begin{lstlisting} 
[FIDOCAD]
TY 320 10 18 11 0 4 1 * Darwin Ampli Esempio 08 
TY 85 240 12 8 0 5 1 * + 
TY 44 239 12 8 0 5 1 * - 
PL 35 90 35 225 10 1
PL 55 130 95 130 10 1
PL 250 130 305 130 10 1
PL 215 130 230 130 10 1
PL 195 140 215 130 10 1
PL 115 130 175 130 10 1
MC 155 220 3 0 PCB.R01
MC 75 80 0 0 PCB.R01
MC 270 185 2 0 PCB.R01
MC 270 80 2 0 PCB.R01
MC 230 130 3 0 PCB.CE00
MC 115 130 1 0 PCB.CE00
MC 40 175 0 0 PCB.CC50
PL 190 80 190 120 10 1
PL 190 140 190 185 10 1
PL 155 80 155 120 10 1
PL 155 120 175 130 10 1
PL 155 140 175 130 10 1
PP 30 30 30 105 90 105 130 55 215 55 260 105 320 105 320 30 1
PP 320 240 320 155 260 155 215 205 135 205 90 155 55 155 55 240 1
MC 190 120 0 0 PCB.TO92
MC 305 90 1 0 PCB.CPBX352
MC 55 90 1 0 PCB.CPBX352
MC 80 225 2 0 PCB.CPBX352
TY 290 65 12 8 0 0 3 * Out 
TY 40 60 12 8 0 0 3 * In 
TY 95 225 12 8 0 0 3 * Alimentazione 
TY 70 190 12 8 0 0 3 * C3 
TY 230 95 12 8 0 0 3 * C2 
TY 115 150 12 8 0 0 3 * C1 
TY 120 170 12 8 0 0 3 * R4 
TY 220 200 12 8 0 0 3 * R3 
TY 230 55 12 8 0 0 3 * R2 
TY 100 55 12 8 0 0 3 * R1 
RV 30 5 320 255 3
\end{lstlisting} 
\section{Frecce e stili di tratto}
À partir de la version 0.23 de FidoCadJ, j'ai rajouté des possibilités vis à vis du dessin. Vous pouvez maintenant rajouter des flèches\index{flèche} sur les extrémités des segments, ainsi que des courbes de Bézier\index{Bézier}.
FidoCadJ offre maintenant la possibilité de choisir de quel côté les dessiner, ainsi que avec quel style parmi ceux disponibles. J'ai rajouté aussi des styles de trait interrompus\index{trait interrompu}, pour faciliter le dessin de schémas techniques. La figure~\ref{fig_gyrator} montre un exemple dans lequel on a dessiné un étage analogique (un GIC) à l'intérieur d'un rectangle avec trait interrompu et avec une flèche au bout d'un tracé de Bézier\index{Bézier}.
En faisant double click sur cet élément, la fenêtre des paramètres qui est montrée est visible figure~\ref{fig_parametri_bezier}. 

Vous pouvez remarquer que l'option <<Arrow at start>> (flèche au début) est activée. Le logiciel dessinera une flèche au bout de la courbe, orientée de façon correcte. Vous pouvez choisir plusieurs styles de flèche\index{flèche} et de trait\index{trait}, dans les listes actionnables à côté des points <<Arrow style>> et <<Dash style>>. Faites quelques tests pour comprendre comment fonctionne le mécanisme.

\begin{figure}
\includegraphics[width=\textwidth]{gyrator}
\caption{Un schéma électrique d'un GIC\index{GIC} dans lequel on a utilisé quelques extensions de FidoCadJ.}
\label{fig_gyrator}
\end{figure}
\begin{figure}
\centering
\includegraphics[width=.7\textwidth]{parametri_bezier}
\caption{La fenêtre des paramètres d'un tracé de Bézier, dans un dessin FidoCadJ.}
\label{fig_parametri_bezier}
\end{figure}
La possibilité de choisir un type de trait et d'ajouter des flèches aux lignes n'est pas prévue dans le format FidoCad originel. Cela implique que malheureusement la compatibilité à l'arrière vers FidoCad\index{FidoCad} pour Windows n'est pas assurée.
Quand on choisit d'utiliser une extension FidoCadJ, il faut qu'il soit bien clair ce que l'on fait. Si l'on a besoin de maintenir une compatibilité avec des utilisateurs de FidoCad\index{FidoCad} et non pas FidoCadJ, on peut activer l'option <<Modalité de compatibilité avec FidoCad>> à l'intérieur de l'ongles <<Extension FidoCadJ>> dans la fenêtre <<Préférences de FidoCadJ>>, avant de commencer le travail.
De cette façon, on ne pourra pas introduire des éléments graphiques qui n'ont pas été prevus par FidoCad et l'on obtiendra des dessins parfaitement compatibles avec ce dernier. Pour plus d'informations, consulter le paragraphe~\ref{FCJ_extension}.

\section{Exportation}
Personnellement, une des choses que je trouve les plus intéressantes et utiles de FidoCadJ est la possibilité de créer des petits schémas pour une utilisation typographique. Pour cette raison, j'ai essayé de permettre et faciliter la mise au point des exportations\index{exportation} des dessins dans des formats graphiques divers et variés.

Pour réaliser une exportation du dessin courant, il suffit de sélectionner l'entrée <<Exportation>> dans le menu <<Fichier>>. Le tableau~\ref{tab_esportazione} montre une liste des formats graphiques qui sont actuellement disponibles pour l'exportation.
\graffito{Un format vectoriel\index{format vectoriel} mémorise les éléments du dessin. Un format à matrice de points\index{format à matrice de points} travaille sur une matrice de pixels à une résolution donnée.}.

Pour chaque format, le tableau spécifie si le format est vectoriel ou à matrice de points. Quand il est possible, il est préférable d'utiliser systématiquement des formats vectoriels pour l'exportation, de façon à obtenir les résultats les meilleurs dans toutes les situations.\footnote{La structure du code de FidoCadJ permet de rajouter avec simplicité des formats vectoriels pour l'exportation. Si vous voulez me donner un coup de main\dots}

Pour les formats à matrice de points, il est peut être utile d'utiliser l'option <<anticrénelage>>, pour limiter l'effet visuel <<en échelle>> des lignes et des éléments du dessin. Les informations sur la résolution, ainsi que l'option anticrénelage ne sont pas utilisées lors de l'exportation dans un format vectoriel.

L'option <<Noir et blanc>> permet d'imprimer tous les éléments visibles seulement en noir plein. Cette fonctionnalité est utile par exemple quand on est en train de préparer des calques pour photo incision.
\begin{table}
\centering
\begin{tabular}{lp{.7\textwidth}}
\toprule
Format
&
Commentaires
\\
\midrule
\textsc{jpg}\index{JPG}
&
Format à matrice de points très diffusé. La compression utilisée est avec pertes\index{compression avec pertes} et ce format n'est pas adapté à l'exportation de schémas comme ceux produits par FidoCadJ.
\\
\textsc{png}\index{PNG}
&
Format compressé, à matrice de point. En manque d'un format vectoriel, ce format est celui le plus adapté à être utilisé pour des schémas et des graphiques.
\\

\textsc{svg}\index{SVG}
&
Format vectoriel standard proposé par le W3C. Certains navigateurs Internet (comme les versions récentes de Safari\index{Safari}) permettent de le visualiser en une page web. Bon format à utiliser pour des graphiques et des schémas, il permet d'utiliser des logiciel tels qu'Inkscape\index{Inkscape} pour retoucher les dessins. Actuellement, des limitations existent pour le texte ayant une orientation différente de l'usuelle.
\\
\textsc{eps}\index{EPS}
&
Format vectoriel Postscript\index{Postscript} encapsulé, très utilisé par les logiciels de graphique professionnelle.  Ce format a été utilisé pour obtenir la figure~\ref{fig_amplificateur}, à la page~\pageref{fig_amplificateur}, en passant par une conversion en \textsc{pdf}, car ce manuel a été produit avec \textsc{pdf}\LaTeX\index{pdfLaTeX@\textsc{pdf}\LaTeX}).
\\
\textsc{pgf}\index{PGF}
&
Format vectoriel prêt à être utilisé directement à l'intérieur d'un fichier source \LaTeX\index{LaTeX@\LaTeX}, à l'aide du paquet \textsl{pgf}, mis à disposition dans l'archive CTAN. Cette modalité d'exportation a été conçue pour exporter les schémas électriques et fournit un code qui peut être modifié à la main. Les textes ne sont pas interprétés: cela permet d'introduire du code\LaTeX\index{LaTeX@\LaTeX} directement à l'intérieur du dessin. Cette technique a été utilisée dans ce manuel pour obtenir la figure~\ref{fig_schema}, à la page~\pageref{fig_schema}.
\\
\textsc{scr}\index{SCR}
&
FidoCadJ, à partir de la version 0.21, permet d'exporter un dessin vers un script interprétable par le logiciel CadSoft\index{CadSoft} Eagle\index{Eagle}. Pour se servir de cette possibilité, il faut copier dans le répertoire  \lstinline!lbr! d'Eagle le fichier \lstinline!FidoCadJLIB.lbr!, téléchargeable depuis le site de FidoCadJ. 
Actuellement, l'exportation est possible seulement pour les schémas électriques qui adoptent les symboles les plus utilisés. Les pastilles et les pistes pour les circuits imprimés ne sont pas exportés.\\
\textsc{pdf}\index{PDF}
&
Le format Portable Document Format, de Adobe. Voir le texte pour ce qui concerne les limitations sur les polices à utiliser\index{polices}.
\\
\bottomrule
\end{tabular}
\caption{Liste des formats d'exportation disponibles avec FidoCadJ.}
\label{tab_esportazione}
\end{table}
Il faut par contre dire quelque mots sur l'exportation en \textsc{pdf} faite par FidoCadJ. Le logiciel ne peut pas inclure des polices à l'intérieur du fichier généré. Cela veut dire que l'on obtiendra des fichiers identiques à l'originel seulement pour les dessins qui utilisent les polices\index{polices} standard type 1 à 14 points:
\begin{itemize}
\item{Courier\index{Courier}: Police avec empattements à espacement fixe. On fait automatiquement la conversion en Courier des écritures faites avec Courier New\index{Courier~New}.}
\item{Times\index{Times}: Police avec empattements à espacement variable. Le logiciel convertit en Times aussi les éléments en Times New Roman\index{Times~New~Roman}, ainsi qu'en Times Roman\index{Times~Roman}}.
\item{Helvetica\index{Helvetica}: Police sans empattements à espacement variable. On y convertit aussi les éléments faits en Arial\index{Arial}.}
\item{Symbol\index{Symbol}: contient plusieurs symboles.}
\end{itemize}
Entre autre, ces polices\index{polices} sont pratiquement toujours disponibles presque partout. C'est donc une très bonne idée de les utiliser de façon systematique.

\section{Options de la ligne de commande}
FidoCadJ est distribué sous la forme d'un fichier \lstinline!.jar!\index{jar}, 
c'est à dire un archive Java\footnote{Sauf dans la version pour Apple \index{Macintosh}Macintosh, pour laquelle il y a une application distribuée sous la forme traditionnelle.}
Dans beaucoup de systèmes d'exploitation, pour lancer l'application il est probablement suffisant de faire double click sur le fichier, à condition d'avoir une version de Java\index{Java} installée sur la machine. Dans la terminologie Sun\index{Sun}, ce qu'il faut avoir est le
JRE\index{JRE}, c'est à dire <<Java Runtime Environment>>: tout ce qu'il faut pour exécuter un logiciel écrit en Java (mais pas pour l'écrire; pour cela il faut le SDK\index{SDK}\dots).

Dans quelques situations, il peut être utile de faire démarrer FidoCadJ depuis l'invite des commandes (le <<terminal\index{terminal}>> des systèmes Unix\index{Unix}, ou le <<MS-DOS prompt\index{MS-DOS prompt}>> pour les systèmes Windows\index{Windows}).
Pour cela, il suffit d'utiliser la commande \lstinline!java!, avec l'option \lstinline!-jar!:
\begin{lstlisting}
java -jar fidocadj.jar
\end{lstlisting}

Si un fichier FidoCad est spécifiée dans la commande\index{ligne de commande}, FidoCadJ va essayer de l'ouvrir. Par exemple, observons la commande (valable dans un système Unix\index{Unix}):
\begin{lstlisting}
java -jar fidocadj.jar ~/FidoCadJ/test.fcd
\end{lstlisting}
FidoCadJ sera démarré et essayera d'ouvrir le fichier\lstinline!~/FidoCadJ/test.fcd! (à condition que ce dernier existe!).

Une autre possibilité intéressante, même si à la rigueur il s'agit plutôt d'une caractéristique de Java\index{Java} plus que de FidoCadJ lui même, est qu'il est possible de modifier l'apparence du logiciel en changent ce qui en jargon Java l'on appelle le <<look and feel>>\index{look \& feel}). 

%Ceci peut être utile par exemple pour intégrer plus le logiciel à l'intérieur d'un environnement Windows\index{Windows}. Dans ce cas, la ligne de commande à utiliser est la suivante:\graffito{Il faut reconnaître que parfois Java n'est pas très synthétique.}
%\begin{lstlisting}
%java -Dswing.defaultlaf=com.sun.java.swing.plaf.windows.WindowsLookAndFeel -jar fidocadj.jar 
%\end{lstlisting}
%Pour des raisons de licence, le <<look and feel>> Windows\index{Windows} n'est disponible que sur les systèmes Microsoft\index{Microsoft}. 
Vous pouvez néanmoins jouer avec l'aspect que vous préférez depuis l'invite des commandes, sans modifier une seule ligne de code. Voici quelque chose que les utilisateurs Linux\index{Linux} probablement vont apprécier: l'aspect GTK+\index{GTK+}:
\begin{lstlisting}
java -Dswing.defaultlaf=com.sun.java.swing.plaf.gtk.GTKLookAndFeel -jar fidocadj.jar 
\end{lstlisting}
Ou aussi le classique <<look and feel>> Motif\index{Motif}, qui est montré dans la figure~\ref{fig_fidocadj_motif}:
\begin{lstlisting}
java -Dswing.defaultlaf=com.sun.java.swing.plaf.motif.MotifLookAndFeel -jar fidocadj.jar 
\end{lstlisting}
\begin{figure}
\includegraphics[width=\textwidth]{fidocadj_motif}
\caption{L'aspect de FidoCadJ sous MacOSX\index{MacOSX}, en utilisant le <<look and feel>> Motif.}
\label{fig_fidocadj_motif}
\end{figure}
Il est clair que les commandes que l'on vient de voir doivent être utilisés depuis l'invite des commandes, une fois que l'on se trouve dans le même répertoire où l'on a placé le fichier \lstinline!fidocad.jar!, en écrivant tout sur la même ligne.

\section{Gestion des librairies}
FidoCadJ permet de spécifier un répertoire à l'intérieur duquel on trouve des fichiers de librairie\index{librairie} (avec l'extension \lstinline!.fcl!) qui seront chargés à chaque démarrage du logiciel.
Pour faire cela, il suffit d'ouvrir la fenêtre <<Vue/Options>> et spécifier le répertoire dans la ligne <<Sélectionner le répertoire librairies>>. Si FidoCadJ trouve un fichier nommé \lstinline!FCDstdlib.fcl!, il chargera la librairie standard depuis ce fichier. S'il trouve par contre un fichier nommé \lstinline!PCB.fcl!, il l'utilisera pour la librairie des pastilles pour circuits imprimés.\footnote{Faites attention à la casse des noms de ces fichiers, si votre système d'exploitation fait une différence entre les lettres minuscules et les majuscules.} Les librairies contenues dans d'autres fichiers avec extension \lstinline!.fcl! seront rajoutés à celles standard. 
Tout cela est fait au démarrage de FidoCadJ, donc n'oubliez pas de redémarrer le logiciel si vous y changez quelque chose.

À partir de la version 0.23, grâce à l'accord de Roby IZ1CYN, j'ai pu inclure la librairie IHRaM 2.1 directement à l'intérieur de l'archive contenant FidoCadJ. Cela pare que parmi les nombreuses librairies mises à point par les utilisateurs elle m'a apparue être la plus complète et rationnelle.
Par contre, si dans le répertoire contenant les librairies externes au logiciel (comme décrit auparavant) on trouve un fichier appelé \lstinline!IHRAM.FCL!, ce dernier sera chargé en mémoire à la place de la version contenue dans FidoCadJ.

\myChapter{Le format des dessins, des macros et des librairies FidoCad}
\label{chap_formato}

Dans ce chapitre, nous allons décrire en détail le format utilisé par FidoCad et de conséquence par FidoCadJ pour mémoriser les dessins. Il s'agit d'un très simple format de texte qui a l'avantage d'être compacte et efficace. Comme ce format n'a jamais été décrit de façon complète, je propose ici un résumé de tout ce que j'ai appris pendant l'étude que j'ai faite.

\section{Description de l'en-tête}
Tous les fichiers qui contiennent un dessin en format FidoCad\index{FidoCad} doivent commencer avec l'en-tête standard \lstinline![FIDOCAD]!. 
Un logiciel peut reconnaître donc la présence de commandes FidoCad en reconnaissant cette en-tête. En réalité, FidoCadJ est beaucoup plus tolérant du FidoCad\index{FidoCad} original et reconnaît et interprète correctement un fichier qui ne présente pas l'en-tête\index{en-tête}.
Même des lignes de commande au milieu du texte sont reconnues correctement, à moins que le nombre de ligne consécutives non lisibles par le logiciel ne dépasse pas une certaine valeur (environ une centaine). Cela évite que FidoCadJ travaille inutilement, et pendant longtemps, si l'utilisateur essaye d'ouvrir un gros fichier binaire.

\section{Le système de coordonnées}
FidoCadJ travaille avec un système de coordonnées\index{système de coordonnées} très simple.
En pratique, le logiciel dessine sur une surface très grande (presque sans limites), identifiée par contre par des coordonnées entières et positives. La largeur de chaque unité en $x$ et en $y$ est fixée à $127\micron$, valeur qui dans la pratique s'est avéré suffisante pour décrire les empreintes SMD\index{circuit imprimé!SMD}, sans par contre être trop petite pour les utilisation les plus courantes.

Le logiciel FidoCad\index{FidoCad} originel travaillait dans deux modalités différentes: PCB (circuit imprimé)\index{circuit imprimé!PCB} et schéma électrique\index{schéma électrique}.
En FidoCadJ, cette différence est beaucoup moins marquée et apparaît seulement au moment d'imprimer un dessin: il est en fait judicieux de modifier la dimension à l'impression un schéma électrique pour s'adapter à la surface disponible, tandis qu'il faudra respecter scrupuleusement les dimensions d'un circuit imprimé.

\section{\'Eléments de dessin}
\label{sec_primitive}
En FidoCadJ, il y a 11 primitives de dessin qui sont les suivantes:
\begin{itemize}
\item Ligne \index{ligne}
\item Rectangle plein ou vide \index{rectangle}
\item Texte simple (obsolète) 
\item Texte avancé \index{texte}
\item Polygone plein ou vide \index{polygone}
\item Ellipse plein ou vide \index{ellipse}
\item Courbe de Bézier \index{Bézier}
\item Connexion électrique \index{connexion}
\item Pastille pour circuit imprimé \index{pastille pour c. i.} 
\item Piste pour circuit imprimé \index{piste per c. i.}
\item Macro\index{macro}
\end{itemize}
Nous allons analyser en détail le format utilisé pour chaque élément.
En général, chaque élément\index{élément} est identifié par une commande suivie par une série de paramètres\index{paramètres} (normalement, des entiers, ou des chaînes de caractères) sur la même ligne, sépares d'un espace.

\subsubsection{Ligne (segment)}
L'élément ligne\index{ligne}\graffito{Les mathématiciens trouveraient probablement plus approprié le terme <<segment>>\index{segment}.} est identifié par la commande \lstinline!LI!\index{LI}, suivie des coordonnées initiales, finales ainsi que du numéro de couche à utiliser:
\begin{lstlisting} 
LI x1 y1 x2 y2 l
\end{lstlisting}
Le point $(x_1, y_1)$ représente les coordonnées initiales, $(x_2, y_2)$ celles finales et $l$ est le numéro du calque, compris entre 0 et 15.

\textbf{Extension FidoCadJ}: à partir de la version 0.23 de FidoCadJ,  \lstinline!LI!\index{LI} peut être suivi à la ligne suivante par une extension:
\begin{lstlisting} 
FCJ a b c d e 
\end{lstlisting}
où $a$ est un entier qui représente la présence ou l'absence de flèches aux extrêmes du segment (voir le tableau~\ref{tab_frecce_estremita}), $b$ est un entier qui identifie le style de la flèche à utiser (voir le tableau~\ref{tab_frecce_stile}). Les paramètres $c$ et $d$ fournissent respectivement la longueur totale et la démi-ouverture de la flèche, tandis que $e$ est le style du trait (interrompu ou pas).
\begin{table}
\centering

\begin{tabular}{ccp{.7\textwidth}}
\toprule
$a$	& Flèche \\
\midrule
0	& aucune \\
1	& au début\\
2	& à la fin\\
3	& aux deux côtés\\
\bottomrule
\end{tabular}
\caption{Présence des flèches aux extrêmes d'un segment ou d'un tracé de Bézier, selon la valeur du code $a$.}
\label{tab_frecce_estremita}
\end{table}

\begin{table}
\centering
\begin{tabular}{ccp{.7\textwidth}}
\toprule
$b$	& Style de la flèche \\
\midrule
0	& flèche pleine et normale \\
1	& flèche pleine avec trait \\
2	& flèche vide\\
3	& flèche vide avec trait\\
\bottomrule
\end{tabular}
\caption{Style des flèches, selon la valur du code $b$.}
\label{tab_frecce_stile}
\end{table}

\subsubsection{Rectangle plein ou vide}
Un rectangle\index{rectangle} plein ou vide est indiqué par les commandes  \lstinline!RP!\index{RP} (plein) et \lstinline!RV!\index{RV} (vide), suivies par les coordonnées des points d'une diagonale du rectangle à tracer, ainsi que par le numéro de la couche à utiliser.
\begin{lstlisting} 
RP x1 y1 x2 y2 l
RV x1 y1 x2 y2 l
\end{lstlisting}
les coordinates $(x_1, y_1)$ représentent le premier point de la diagonale, $(x_2, y_2)$ le deuxième point et $l$ est le numéro du calque, compris entre 0 et 15.

\textbf{Estension FidoCadJ}: à partir de la version 0.23 de FidoCadJ,  \lstinline!RP!\index{RP} et \lstinline!RV!\index{RV} peuvent être suivis par un'extension dans la ligne suivante:
\begin{lstlisting} 
FCJ e 
\end{lstlisting}
où $e$ est un entier qui fournit le style à utiliser pour le trait.

\subsubsection{Texte simple (obsolète)}
Le texte simple\index{texte simple} a été le premier élément de texte mis à disposition par les premières versions de FidoCad\index{FidoCad}.

Cet élément de dessin a été considéré obsolète\index{obsolète} par Lorenzo Lutti\index{Lorenzo Lutti}, le créateur de FidoCad\index{FidoCad}. FidoCadJ se comporte de la même façon et, même si des dessins qui utilisent cet élément sont visualisés correctement, l'utilisateur ne peut pas l'introduire à partir de la barre des commandes. FidoCadJ convertira dans la mémoire cette commande dans l'élément <<texte avancé>> et il utilisera la commande \lstinline!TY!\index{TY} lors de la sauvegarde du fichier.

La commande utilisée est \lstinline!TE!\index{TE} et le format est le suivant:
\begin{lstlisting} 
TE x1 y1 £texte à écrire
\end{lstlisting}
le point $(x_1, y_1)$ spécifie où les caractères <<texte à écrire>> seront positionnés. Nous pouvons remarquer que l'indication du calque n'apparaît pas. FidoCadJ traitera cet objet comme appartenant au calque zéro (circuit\index{circuit}).

\subsubsection{Texte avancé}
L'élément texte avancé\index{texte avancé} permet une flexibilité bien plus grande par rapport à l'élément texte simple\index{texte simple} que l'on vient de voir.

Cet élément est identifié par la commande \lstinline!TY!\index{TY}, suivie par plusieurs paramètres qui spécifient l'orientation du texte (texte pivoté\index{texte pivoté}, ou en miroir\index{texte en miroir}), ainsi que les dimensions en $x$ et en $y$ de la police utilisée.
Comme il commence à y avoir pas mal d'informations à fournir, la ligne de commande est plutôt articulée:
\begin{lstlisting} 
TY x1 y1 sy sx a s l f £texte à écrire
\end{lstlisting}
le point $(x_1, y_1)$ représente l'endroit où le texte <<texte à écrire>> sera positionné.
Les valeurs de $s_y$ et $s_x$ indiquent la dimension verticale et horizontale du texte en unités logiques\index{unités logiques}. J'ai choisi de faire en sorte que FidoCadJ calcule la dimension verticale du texte à partir de celle horizontale, et qu'il applique des déformations à la polices seulement si strictement nécessaire.

La rotation du texte est spécifiée par le terme $a$, exprimé en degrés, tandis que la valeur de $s$ détermine le style du texte\index{style du texte}, selon le tableau~\ref{tab_stile_testo}.
La couche utilisée est représentée par le terme $l$, tandis que  $f$ indique la police à utiliser, ou il est une étoile\index{étoile}, pour indiquer l'utilisation de la police standard, qui est Courier New\index{Courier~New}.
Si le nom de la police contient des espaces, ceux derniers sont remplacés par le symbole +\index{+}.


%\begin{figure}
%\centering
%\includegraphics[width=0.4\textwidth]{courier_sample}
%\caption{Un exemple de la police Courier, utilisée par FidoCadJ.}
%\label{fig_courier_sample}
%\end{figure}

\begin{table}
\centering
\begin{tabular}{llp{.7\textwidth}}
\toprule
Bit
&
Poids
&
Fonction
\\
\midrule
0
&
1
&
Texte en noir
\\
2
&
4
&
Texte en miroir
\\

\bottomrule
\end{tabular}
\caption{Fonctions des bits dans le style du texte.}
\label{tab_stile_testo}
\end{table}

La longueur maximale du texte\index{longueur maximale du texte} est d'environ quatre vingt mots. Le compte est effectué en mots, et non pas en caractères, car dans la structure interne du logiciel le mots sont séparés pendant que le dessin est chargé en mémoire.

\subsubsection{Polygone plein ou vide}
Un polygone\index{polygone} plein ou vide est indiqué respectivement par les commandes \lstinline!PP!\index{PP} et \lstinline!PV!\index{PV}, suivies par les coordonnées des sommets, qui définissent le polygone, et la couche.
\begin{lstlisting} 
PP x1 y1 x2 y2 ... l
PV x1 y1 x2 y2 ... l
\end{lstlisting}
les points $(x_1, y_1)$, $(x_2, y_2)$\dots sont les coordonnées des sommets qui définissent le polygone et $l$ est le numéro du calque, indiqué avec une chiffre comprise entre 0 et 15.
La longueur totale de la ligne est donc variable et dépend du nombre de sommets qui sont présents. Le nombre maximum de sommets\index{nombre maximum de sommets} disponibles est fixé à 20 de façon arbitraire, pour éviter des lignes trop longues.

\textbf{Estension FidoCadJ}: à partir de la version 0.23 de FidoCadJ,  \lstinline!PP!\index{PP} et \lstinline!PV!\index{PV} peuvent être suivis par un'extension dans la ligne suivante:
\begin{lstlisting} 
FCJ e 
\end{lstlisting}
où $e$ est un entier qui fournit le style à utiliser pour le trait.

\subsubsection{Ellipse pleine ou vide}
Un'ellipse\index{ellipse} pleine ou vide est indiquée respectivement par les commandes \lstinline!EP!\index{EP} et \lstinline!EV!\index{EV}, suivies par les coordonnées des deux extrêmes d'une diagonale et du numéro de la couche:
\begin{lstlisting} 
EP x1 y1 x2 y2 l
EV x1 y1 x2 y2 l
\end{lstlisting}
Le point $(x_1, y_1)$ représente le premier point de la diagonale et $(x_2, y_2)$ le deuxième. Le terme $l$ est le numéro de la couche, identifiée par un entier compris entre 0 et 15.

\textbf{Estension FidoCadJ}: à partir de la version 0.23 de FidoCadJ,  \lstinline!EP!\index{EP} et \lstinline!EV!\index{EV} peuvent être suivis par un'extension dans la ligne suivante:
\begin{lstlisting} 
FCJ e 
\end{lstlisting}
où $e$ est un entier qui fournit le style à utiliser pour le trait.

\subsubsection{Courbe de Bézier}
Une courbe de Bézier\index{Bézier}, dans sa variante cubique, est identifiée par quatre points qui sont donc requis par la commande \lstinline!BE!\index{BE}:
\begin{lstlisting} 
BE x1 y1 x2 y2 x3 y3 x4 y4 l
\end{lstlisting}
Les points $P_1\equiv (x_1, y_1)$,  $P_2\equiv (x_2, y_2)$,  $P_3\equiv(x_3, y_3)$ et  $P_4\equiv (x_4, y_4)$ sont les quatre points de contrôle de la courbe de Bézier\index{Bézier}, tandis que $l$ est le numéro de la couche, identifiée par un entier compris entre 0 et 15.
Une fois identifié les quatre points que l'on vient de voir, la courbe est donnée par l'équation suivante, qui effectue une combinaison entre les différents points:
\begin{equation}
B(t)=(1-t)^3P_1+3t(1-t)^2P_2+3t^2(1-t)P_3+t^3P_4
\end{equation}
où le terme $t\in [0,1]$ est un paramètre.

\textbf{Extension FidoCadJ}: à partir de la version 0.23 de FidoCadJ,  \lstinline!BE!\index{BE} peut être suivi à la ligne suivante par une extension:
\begin{lstlisting} 
FCJ a b c d e 
\end{lstlisting}
où $a$ est un entier qui représete la présence ou l'absence de flèches aux extrêmes du segment (voir le tableau~\ref{tab_frecce_estremita}), $b$ est un entier qui identifie le style de la flèche à utiser (voir le tableau~\ref{tab_frecce_stile}). Les paramètres $c$ et $d$ fournissent respectivement la longueur totale et la démi-ouverture de la flèche, tandis que $e$ est le style du trait (interrompu ou pas).

\subsubsection{Connexion électrique}
L'élément connexion électrique\index{connexion} est tout simplement un petit cercle plein de dimension constante et il est utilisé pour représenter une connexion entre deux fils dans un schéma électrique. Il est caractérisé par la commande \lstinline!SA!\index{SA} et nécessite uniquement des coordonnées, ainsi que la couche:
\begin{lstlisting} 
SA x1 y1 l
\end{lstlisting}
Avec FidoCadJ, le diamètre du cercle est fixé à 2 unités logiques et ne peut pas être modifié par l'utilisateur.

\subsubsection{Pastille pour circuit imprimé}
Une pastille pour circuit imprimé\index{pastille pour c. i.} est identifiée par la commande  \lstinline!PA!\index{PA} et  est caractérisée par son style (rond, rectangulaire, rectangulaire avec les coins arrondis), ainsi que par la dimension du trou interne:
\begin{lstlisting} 
PA x1 y1 dx dy si st l
\end{lstlisting}
Le point $(x_1, y_1)$ va nous donner la position de la pastille,  $d_x$ et $d_y$ sont la largeur et l'hauteur de la pastille. La valeur de $s_\mathrm{i}$ sera le diamètre interne du trou et $s_\mathrm{t}$ le style:
\begin{itemize}
\item[0] pastille ovale
\item[1] pastille circulaire
\item[2] pastille rectangulaire avec les coins arrondis
\end{itemize}
La valeur de $l$ indique le numéro de la couche où la pastille sera tracée.

\subsubsection{Piste pour circuit imprimé}
La piste pour circuit imprimé\index{piste pour c. i.} est en gros rien d'autre qu'un segment, pour lequel on peut spécifier la largeur. Les extrêmes du segment sont toujours arrondis, pour simplifier la connexion avec les autres pistes du circuit. La commande à utiliser est \lstinline!PL!\index{PL}, avec le format qui suit:
\begin{lstlisting} 
PL x1 y1 x2 y2 di l
\end{lstlisting}
La piste est tracée entre les points $(x_1, y_1)$ e $(x_2, y_2)$, avec l'épaisseur $d_\mathrm{i}$, sur la couche $l$.

\subsubsection{Macro}
Une macro\index{macro} est un dessin ou un symbole présent à l'intérieur d'une librairie. Très typiquement, les symboles électriques les plus utilisés sont représentés de cette façon.
La commande à utiliser pour introduire une macro est \lstinline!MC!\index{MC}, en utilisant la structure suivante:
\begin{lstlisting} 
MC x1 y1 o m n
\end{lstlisting}
La macro est dessinée aux coordonnées $(x_1, y_1)$, avec un angle donnée par la valeur de $o$ (multipliée fois 90°). Si $m$ vaut 1, la macro est tracée en miroir. Le dernier paramètre, $n$ est le nom de la macro, spécifié sous la forme  \lstinline!librairie.clé!. Il y a une exception importante à cette règle pour les éléments de la librairie standard (et seulement pour eux!), où la macro est appelée seulement par sa clé.

\textbf{Extension FidoCadJ}: à partir de la version 0.21 de FidoCadJ, \lstinline!MC!\index{MC} peut être suivi par un code \lstinline!FCJ! à la ligne suivante:
\begin{lstlisting} 
[FIDOCAD]
MC 40 30 0 0 080
FCJ
TY 50 35 4 3 0 0 0 * R1
TY 50 40 4 3 0 0 0 * 47k
\end{lstlisting}

La présence de cette commande indique que la définition de la macro n'est pas terminée, mais qu'il y a des informations en plus concernant le nom et la valeur de la macro, spécifiés à l'aide de deux commandes \lstinline!TY!. Actuellement (0.23), FidoCadJ prend en compte les coordonnées, le texte ainsi que la police des caractères utilisée.

Cette façon de procéder a l'avantage que si un fichier contenant des extensions est lu par FidoCad\index{FidoCad}, ce dernier fournira un message d'erreur, mais lira correctement le schéma (voir le paragraphe~\ref{FCJ_extension}).

\section{Extensions de FidoCadJ}
\label{FCJ_extension}

À partir de la version 0.21, FidoCadJ a introduit des extensions\index{extension FidoCadJ} au format FidoCad originel. Dans le code, ces extensions sont identifiées par la commande \lstinline!FCJ!\index{FCJ}. La présence de cette commande indique que l'instruction précédente n'est pas terminée, mais qu'il faut spécifier davantage d'informations.

FidoCadJ introduit à partir de la version 0.23 des extensions plus importantes, mais dispose par contre d'une modalité de <<compatibilité avec FidoCad>> qui est contrôlable d'après l'onglet <<Extensions FidoCadJ>> à l'intérieur de la fenêtre <<Préférences>>\index{extensions FidoCadJ}. Si cette modalité est activée, toutes les extensions propres à FidoCadJ sont désactivées et le dessin sera parfaitement compatible avec FidoCad\index{FidoCad} pour Windows.
Dans le cas contraire, FidoCad\index{FidoCad} sera encore capable de lire les schémas produits par FidoCadJ (bien qu'il fournira un message d'erreur), mais les informations en plus seront perdues.

Le résultat dépendra du contexte: une ligne dessinée à trait interrompu sera rendue comme une ligne continue. Les flèches qui étaient associées aux extrémités ne seront pas dessinées. Par contre, le texte associé à une macro (nom et valeur) sera affiché correctement. La figure~\ref{fig_gyrator_n} devrait résumer ce que l'on obtient lorsque l'on lit avec FidoCad le code utilisé pour dessiner la figure~\ref{fig_gyrator}. FidoCad sera un peu énervé à cause des commandes qui ne reconnaîtra pas, il y a des détails qui manquent, mais le dessin demeure compréhensible.

\begin{figure}
\includegraphics[width=\textwidth]{gyrator_n}
\caption{La figure~\ref{fig_gyrator} comme apparaîtrait si montrée avec FidoCad.}
\label{fig_gyrator_n}
\end{figure}


\section{Tolérance aux erreurs de syntaxe}
FidoCadJ a été écrit pour être particulièrement tolérant vis à vis d'erreurs\index{tolérance aux fautes}, ou à des commandes incomplètes qui sont fournies au logiciel. Clairement, à moins que vous ayez une boule de cristal USB\index{boule de cristal USB}, le logiciel ne pourra pas corriger les erreurs et il se limitera à sauter les lignes qui posent problèmes ou sont incomplètes.

Une exception à ce comportement est due au fait que, pour des raisons de compatibilité avec les toutes premières versions de FidoCad FidoCad\index{FidoCad}, certains éléments peuvent être spécifiés en omettant la couche\index{couche} à utiliser.
Il seront dans ce cas considérés comme faisant partie de la couche 0, destinée au dessin des schémas électriques.

\section{Le format des librairies}
La structure d'un fichier de librairie est très simple:

\begin{lstlisting} 
[FIDOLIB Librairie de base]
{Syboles de base}
[000 Terminal]
LI 100 100 102 100
EV 102 98 106 102
[010 Terminal +]
LI 100 100 102 100
EV 102 98 106 102
LI 103 100 105 100
LI 104 99 104 101
[020 Terminal -]
LI 100 100 102 100
EV 102 98 106 102
LI 103 100 105 100
...
\end{lstlisting}
La première ligne indique, entre crochets\index{crochets}, le nom de la librairie (après le texte FIDOLIB\index{FIDOLIB}). La deuxième ligne fournit, entre accolades, la catégorie de la librairie à l'intérieur de laquelle nous allons organiser les macros qui vont suivre dans le fichier.

Chaque macro est composée par un en-tête\index{en tête} (entre crochets), ainsi qu'une suite de commandes de dessin. L'en-tête est composé par la clé (qui \textsl{doit} être unique dans chaque librairie), ainsi que d'une description. La clé est utilisée à l'intérieur du code FidoCad, tandis que la description servira à guider l'utilisateur dans le choix pendant l'utilisation du logiciel.
Les commandes de dessin ne sont rien d'autre que des dessins FidoCad, autour du point (100, 100), qui est utilisé comme origine. Cette origine sera ensuite utilisée comme point de base pour le positionnement de la macro. La macro sera utilisé à l'aide de la commande MC\index{MC}, avec le code <<librairie.macro>>.

Nul n'empêche d'utiliser une macro à l'intérieur d'une autre macro. Ce qu'il faut éviter est par contre la récursion\index{récursion}, c'est à dire de définir une macro qui fait appel à soi même.


\section{Librairies standard}
FidoCadJ contient à son intérieur plusieurs librairies fournies traditionnellement avec FidoCad\index{FidoCad}. 
En particulier, il s'agit de la librairie standard\index{librairie standard} et de la librairie dédiée aux symboles des composants pour les circuits imprimés(PCB)\index{librairie PCB}.

Il est néanmoins possible de substituer le contenu des librairies internes à FidoCadJ, en spécifiant au logiciel (menu ``Vue/Options/Répertoire librairies'')  un répertoire contenant les librairies à charger.
Si un fichier nommé \lstinline!FCDstdlib.fcl! est présent dans ce répertoire, son contenu sera utilisé à la place de la librairie standard. Si par contre un fichier nommé \lstinline!PCB.fcl! est présent, son contenu sera utilisé à la place de la librairie contenant les symboles pour les circuits imprimés.
Librairies contenues dans des fichiers avec un nom différent, mais toujours avec l'extension \lstinline!fcl! seront chargées à côté des librairies standard.

\myChapter{Conclusion}
Dans ce manuel, nous avons vu comment utiliser FidoCadJ pour dessiner un schéma électrique te un simple circuit imprimé. A ce point, le lecteur devrait posséder tous les éléments nécessaires pour utiliser de façon créative FidoCadJ pour ses exigences.

Il ne faut pas croire que FidoCadJ est un instrument dédié seulement à l'électronique. En préparant des librairies spécifiques, il devient possible de l'utiliser pour une variété très grande de dessins bi-dimensionnels.

Il est très important que les utilisateurs puissent communiquer avec moi (en particulier, pour savoir dans quelle direction continuer le développement). N'hésitez donc pas à me contacter (\href{mailto:davbucci@tiscali.it}{davbucci@tiscali.it}, mais sans aucun type de fichier joint!).


\appendix

\myChapter{Extensions spécifiques aux systèmes d'exploitation}
\label{specifics}
\section{MacOSX}
\subsection{Extensions}
Une des critiques les plus courantes faites aux premières versions de FidoCadJ de la part des utilisateurs Macintosh (comme moi, du reste) concerne la mauvaise intégration de ce logiciel sous MacOSX. \`A partir de la version 0.21.1, FidoCadJ a fait des efforts spécifiques pour s'intégrer avec l'apparence et le fonctionnement des applications natives.
Pour cette raison, certains détails sur le fonctionnement du logiciel sont légèrement différents lorsque FidoCadJ se rend compte d'être en train de tourner sur une plate-forme Apple:
\begin{itemize}
\item FidoCadJ utilise par défaut le look and feel Quaqua\footnote{Quaqua est disponible à l'adresse: \href{http://www.randelshofer.ch/quaqua/}{http://www.randelshofer.ch/quaqua/}}\index{Quaqua} quand il est fait démarrer à partir de l'application complète (FidoCadJ.app\index{FidoCadJ.app}, pas donc juste le fichier fidocadj.jar\index{fidocadj.jar}). Quaqua pourrait introduire des ralentissements sur des ordinateurs pas très récents. Pour cette raison, il est possible de le désactiver à partir de la fenêtre Préférences.
\item La barre du menu se trouve à sa place, c'est à dire dans la partie haute de l'écran.
\item Les entrées <<Préférences\dots>> et <<\`A propos de FidoCadJ>> se trouvent à leur place, c'est à dire à l'intérieur du menu <<FidoCadJ>>.
\item Le logiciel déclare au système d'exploitation sa disponibilité à ouvrir les fichiers de type \lstinline!.fcd!. Il y associe aussi une icône évocatrice.
\end{itemize}

\subsection{Comment télécharger et exécuter FidoCadJ sous MacOSX}
FidoCadJ peut fonctionner avec une version de MacOSX\index{MacOSX} supérieure ou égale à la version 10.3.9 (Panther\index{Panther}). La raison est que FidoCadJ demande une version de Java supérieure à la 1.4. Apple fournit normalement tout ce qu'il faut pour exécuter une application Java à l'intérieur de son système d'exploitation vedette.

Même s'il est tout à fait possible de télécharger et utiliser le fichier \lstinline!fidocad.jar! comme l'on fait avec d'autres systèmes d'exploitation, il est plutôt indiqué d'utiliser l'application que j'ai mise à disposition exprès pour ce système.
Tout est tout à fait identique aux applications natives; il suffit de télécharger l'image disque qui contient le logiciel à l'adresse suivant: 
\href{http://sourceforge.net/projects/fidocadj/files/FidoCadJ.dmg/download}{http://sourceforge.net/projects/fidocadj/files/FidoCadJ.dmg/download}, ouvrir l'image disque et déplacer \lstinline!FidoCadJ.app! à l'intérieur du dossier \lstinline!Applications!, où il sera disponible comme tout autre logiciel installé dans le système.
Pour desinstaller FidoCadJ, il sera suffisant de déplacer \lstinline!FidoCadJ.app! dans la corbeille.

\section{Linux}
\subsection{Estensions}
Sous Linux\index{Linux}, le logiciel ne prévoit pas d'extensions spécifiques.

\subsection{Comment télécharger et executer FidoCadJ sous un système Linux}
\label{installazione_linux}
\textsl{par Roby Pozzato IZ1CYN}\\

Presupposé: avoir installé le JRE\index{JRE} 6 par Sun\index{Sun} et/ou OpenJDK\index{OpenJDK} 6 JRE\index{JRE} (ou les versions précédentes compatibles avec ce qui demande FidoCadJ).
Dans le paragraphe \ref{inst_testo}, nous allons décrire comment installer le logiciel en utilisant seulement des commandes à fournir dans une invite de commandes. Dans le paragraphe \ref{inst_grafica}, nous allons par contre voir ce qu'il faut faire dans un système pourvu d'une interface graphique.


\subsection{Sur n'importe quel système, depuis l'invite des commandes}
\label{inst_testo}
Nous allons télécharger le logiciel en utilisant la commande \lstinline!wget!:

%\lstset{language=plain}
	%basicstyle=\tiny\ttfamily}

\begin{lstlisting}
$ wget http://davbucci.chez-alice.fr/elettronica/fidocadj/fidocadj.jar
--23:51:22--  http://davbucci.chez-alice.fr/elettronica/fidocadj/fidocadj.jar
           => `fidocadj.jar'
Risoluzione di davbucci.chez-alice.fr in corso... 212.27.63.127
Connessione a davbucci.chez-alice.fr|212.27.63.127:80... connesso.
HTTP richiesta inviata, aspetto la risposta... 200 OK
Lunghezza: 276,694 (270K) [application/x-java-archive]

100%[====================================>] 276,694       71.75K/s    ETA 00:00

23:51:26 (71.59 KB/s) - "fidocadj.jar" salvato          [276694/276694]
\end{lstlisting}
\lstset{
	basicstyle=\small\ttfamily}

Nous allons créer un répertoire (mais tout d'abord devenons super-utilisateurs\index{super-utilisateur} avec la commande \lstinline!su! ou \lstinline!sudo -s!)


\begin{lstlisting}
# mkdir /usr/bin/fidocadj
\end{lstlisting}

\dots et nous allons y déplacer le fichier que l'on vient de télécharger (substituez \lstinline!<user>! avec le nom de l'utilisateur qui a téléchargé le fichier):

\begin{lstlisting}
# mv /home/<user>/fidocadj.jar /usr/bin/fidocadj
\end{lstlisting}

Allons donc rendre exécutable le fichier:

\begin{lstlisting}
# chmod +x /usr/bin/fidocadj/fidocadj.jar
\end{lstlisting}

Et n'oublions pas de redevenir des utilisateurs normaux!

\begin{lstlisting}
# exit
\end{lstlisting}

Maintenant, nous pouvons lancer le logiciel:

\begin{lstlisting}
$ /usr/bin/fidocadj/fidocadj.jar
\end{lstlisting}
%

\subsection{Sur un système graphique}
\label{inst_grafica}
Dans notre exemple, nous allons décrire ce qu'il faut faire pour une distribution Ubuntu\index{Ubuntu} 8.04. De toute façon, pour des versions précédentes ou successives (ou bien d'autres systèmes), ne changent que des détails:

\begin{itemize}
\item {Nous pouvons télécharger le fichier avec le navigateur Internet, voire avec des outils tels que Gwget.}
\item {Nous allons démarrer notre outil de gestion de fichier (Nautilus, Konqueror, etc.) en tant que super-utilisateur. S'il n'y a pas une option exprès pour effectuer cela dans les menus, il suffit de le faire démarrer à partir de l'invite des commandes avec \lstinline!sudo nautilus!). Nous allons créer le répertoire \lstinline!/usr/bin/fidocadj! et nous pouvons y déplacer le fichier que nous venons de télécharger (probablement, il se trouve en  \lstinline!/home/<user>/!)}

\begin{figure}
\centering
\includegraphics[width=.8\textwidth]{permessi}
\caption{La fenêtre de gestion des permissions, dans la distribution Ubuntu\index{Ubuntu} 8.04.}
\label{fig_permessi}
\end{figure}

\item {En faisant click droit sur le fichier, dans la fenêtre nous allons selectionner l'onglet <<Permissions>>. Nous pouvons sélectionner l'option <<Permettre l'exécution du fichier en tant que logiciel>>, tel que montré dans la figure~\ref{fig_permessi}.}

\begin{figure}
\centering
\includegraphics[width=.8\textwidth]{java6}
\caption{Selectionner l'execution de la machine virtuelle Java, dans la distribution Ubuntu\index{Ubuntu} 8.04.}
\label{fig_java6}
\end{figure}

\item {En sélectionnant l'onglet <<Ouvrir avec>>, nous pouvons sélectionner l'option <<OpenJDK Java 6 Runtime>>, ou <<Sun Java 6 Runtime>>, comme montré figure~\ref{fig_java6}.}\footnote{Note. On m'a signalé qu'en utilisant le runtime OpenJDK, on risque d'avoir des problèmes lors de l'impression sur des imprimantes qui utilisent des pilotes CUPS. Si vous avez des problèmes, faites des tests sur d'autres systèmes telles que Sun JRE 1.4.2, si disponible.}

\item {Faisons click sur <<Fermer>> et nous sommes prêts à exécuter FidoCadJ: un double click sur l'exécutable, ou nous pouvons le rajouter au menu; la commande à utiliser est tout simplement: \lstinline!/usr/bin/fidocadj/fidocadj.jar!.}
\end{itemize}



\section{Windows}
À partir de la version 0.23, si FidoCadJ est fait tourner sous Windows, on utilise par défaut le <<Look and Feel>> destiné à ce système d'exploitation.


\manualmark 
\markboth{\spacedlowsmallcaps{\indexname}}% 
{\spacedlowsmallcaps{\indexname}} 
\refstepcounter{dummy} 
\pagestyle{scrheadings} 
\addcontentsline{toc}{chapter}{\tocEntry{\indexname}} 
\printindex 
\cleardoublepage
\thispagestyle{empty}
\mbox{ }
\vfill
Ce manuel a été rédigé en utilisant \textsc{pdf}\LaTeX\ sous MacOSX, en adoptant la classe \href{http://www.ctan.org/tex-archive/macros/latex/contrib/classicthesis/}{classicthesis}.
Le code a été mis en page en utilisant le paquet \href{http://www.ctan.org/tex-archive/macros/latex/contrib/listings/}{listings}. Le paquet \href{http://www.ctan.org/tex-archive/graphics/pgf/}{pgf} a été utilisé pour la figure~\ref{fig_schema}. Les paquets sont disponibles dans l'archive CTAN.

Ce travail a été composé avec la police \emph{Palatino}, de Hermann Zapf. 
\end{document}
