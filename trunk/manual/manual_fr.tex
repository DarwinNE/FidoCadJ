\documentclass[10pt,a4paper,twoside]{scrreprt}
\usepackage[english,french]{babel} 

\usepackage{classicthesis-ldpkg} 
\usepackage[eulerchapternumbers,%pdfspacing,%
            subfig,eulermath,parts]{classicthesis}
\pagestyle{headings}

% Correct the wrong spacing (we are typing in French here) of Classicthesis
%\renewcommand{\thetable}{\arabic{table}}
%\renewcommand{\thefigure}{\arabic{figure}}

\addtolength{\voffset}{9mm}   %\fg > moves text field down
\usepackage[latin1]{inputenc}   % Encodage ISO-8859-1.
\usepackage{graphicx}
\graphicspath{{images/}} 
\newcommand{\keyevidence}[1]{\fbox{#1}}

\usepackage{pgf}

%\usepackage{listings} 
\usepackage{makeidx}

\lstdefinelanguage{FIDOCAD} 
	{morekeywords={LI,PP,PV,TY,TE,MC,EV,EP,RP,RV,BE,SA,PA,PL,FCJ,FJC%
		[FIDOCAD],[FIDOLIB]}, 
	sensitive=false, 
	morecomment=[s]{[}{]}, 
	morecomment=[s][\color{blue}]{\{}{\}}, 
	morecomment=[l][\color{violet}]{*},
	moredelim=[il][\color{violet}]{£},
} 

\let\hreforig\href
\renewcommand{\href}[2]{%
   \begin{otherlanguage}{english}\hreforig{#1}{#2}\end{otherlanguage}%
}

% *******************************************************
% Hyperreferences
% *******************************************************
\hypersetup{%
    colorlinks=true, linktocpage=true, pdfstartpage=3, pdfstartview=FitV,%
    breaklinks=true, pdfpagemode=UseNone, pageanchor=true, pdfpagemode=UseOutlines,%
    plainpages=false, bookmarksnumbered, bookmarksopen=true, bookmarksopenlevel=1,%
    hypertexnames=true, pdfhighlight=/O,%hyperfootnotes=true,%nesting=true,%frenchlinks,%
    urlcolor=webbrown, linkcolor=RoyalBlue, citecolor=webgreen, %pagecolor=RoyalBlue,%
    % uncomment the following line if you want to have black links (e.g., for printing)
    %urlcolor=Black, linkcolor=Black, citecolor=Black, %pagecolor=Black,%
    pdftitle={FidoCadJ -- manuel de l'utilisateur},%
    pdfauthor={Davide Bucci},%
    pdfsubject={Comment utiliser FidoCadJ},%
    pdfkeywords={FidoCad, FidoCadJ, CAO, schémas électriques, circuits imprimés},%
    pdfcreator={pdfLaTeX},%
    pdfproducer={LaTeX with hyperref and classicthesis}%
}
%\lstset{frame=single,%
%	}

\newcommand{\micron}{\,\mu\mathrm{m}}

\title{\Huge\color{webbrown} FidoCadJ 0.23.3 \\ le manuel de l'utilisateur} 


\author{Davide Bucci\\[3em]
\includegraphics[width=.7\textwidth]{icona_fidocadj_a}
}

 \makeindex


\begin{document} 
\pagenumbering{roman}

\pdfbookmark[1]{Front}{Front}
\maketitle 
\lstset{language=FIDOCAD,%
	basicstyle=\small\ttfamily,%
	frame=single} 


\clearpage
\pdfbookmark[1]{Licence}{Licence}
Le présent document est protegé par la Creative Commons Public License version 3.0 
ou plus recente. Le texte intégral de cette licence est disponible à l'adresse\\
\href{http://creativecommons.org/licenses/by-nc-nd/3.0/deed.fr}{http://creativecommons.org/licenses/by-nc-nd/3.0/deed.fr}. 
 
 Vous êtes libre de de reproduire, distribuer et communiquer cette création au public aux conditions suivantes: 
\begin{itemize}
\item[\textit{Paternité}]{--- Vous devez citer le nom de l'auteur original de la manière indiquée par l'auteur de l'\oe uvre ou le titulaire des droits qui vous confère cette autorisation (mais pas d'une manière qui suggérerait qu'ils vous soutiennent ou approuvent votre utilisation de l'\oe uvre).}
\item[\textit{Pas d'utilisation commerciale}]{--- Vous n'avez pas le droit d'utiliser cette création à des fins commerciales.}
\item[\textit{Pas de Modification}]{--- Vous n'avez pas le droit de modifier, de transformer ou d'adapter cette création. Chaque fois que l'on utilise ou on distribue cette \oe uvre, il faut le faire selon les termes de cette licence, qui doit être communiquée avec clarté.}
\end{itemize}
Chacune de ces conditions peut être levée si vous obtenez l'autorisation du titulaire des droits sur cette \oe uvre (Davide Bucci). 
\vfill

Les noms commerciaux, les logos et les marques déposées appartiennent à leurs propriétaires respectifs.



\begingroup
%\let\clearpage\relax
%\let\cleardoublepage\relax
%\let\cleardoublepage\relax


\chapter*{Résumé}

\pdfbookmark[1]{Résumé}{Résumé}
Ce document est le manuel officiel de FidoCadJ. Après une brève présentation de l'histoire de ce logiciel et de sa philosophie, nous allons voir les notions principales nécessaires pour dessiner un simple schéma électrique et un circuit imprimé. Ce manuel s'achève avec des détails techniques peu documentés jusqu'à présent, comme la description complète du format de fichier utilisé par FidoCad et par conséquent par FidoCadJ.

\endgroup			



\chapter*{Remerciements}
\pdfbookmark[1]{Remerciements}{Remerciements}

Beaucoup de personnes ont utilisé le logiciel (ou une de ses versions préliminaires) et ils m'ont fait parvenir leurs impressions. Je veux donc remercier ici pour leurs conseils les assidus du groupe de discussion\index{groupe de discussion} it.hobby.elettronica\index{it.hobby.elettronica}.
Ce logiciel a été testé sous Linux grâce la patience de Stefano Martini, qui a été un fin chercheur de bogues. En outre, je veux remercier Olaf Marzocchi et Emanuele Baggetta pour leurs tests sous MacOSX.

Je remercie F. Bertolazzi pour m'avoir motivé à faire en sorte que le logiciel soit utilisable et qui a preparé avec patience la bibliothèque CadSoft Eagle permettant l'exportation vers ce logiciel. Je remercie Celsius, qui a testé le fonctionnement du logiciel pour la réalisation de circuits imprimés et les bibliothèques, ainsi qu'Andrea D'Amore, pour ses conseils pour améliorer l'apparence du logiciel sous Apple Macintosh, à partir de la version 0.21.1. Un merci à Roby IZ1CYN, qui a écrit le paragraphe~\ref{installazione_linux} de ce manuel. Je remercie aussi Pasu, qui a traduit tout ce manuel en anglais, pour favoriser la diffusion de ce logiciel. Il m'a aussi aidé à trouver plusieurs fautes dans la version anglaise de l'interface. 
Les utilisateurs Macintosh peuvent compter sur l'interface de FidoCadJ qui s'intègre bien dans leur système grâce au \textit{look and feel} Quaqua\index{Quaqua}, fruit du travail de Werner Randelshofer. Werner a aussi fourni des bons conseils sur l'optimisation de l'interface de FidoCadJ: merci!
En avril 2010, FidoCadJ a été intégré à l'intérieur du forum du portail \href{www.electroportal.it}{www.electroportal.it}. 
Je remercie l'administrateur le webmaster et les utilisateurs de ce site, qui m'ont fourni beaucoup de très bonnes idées pour adapter FidoCadJ à tourner silencieusement sur le serveur du site, afin de convertir les dessins de façon automatique. Une voie très prometteuse a été ouverte!

Un sincère merci à Geo Cherchetout, qui a relu très en détail la version française de ce manuel en corrigeant mes \og  italianismes\fg  et mes nombreuses fautes de frappe.

\chapter*{Note pour la version française du logiciel}
\pdfbookmark[1]{Note pour la version française du logiciel}{Note pour la version française du logiciel}

FidoCadJ est un logiciel qui est né au sein d'une communauté italienne d'utilisateurs. Cependant, j'habite la France depuis un certain nombre d'années et j'ai choisi de faire un effort pour traduire le logiciel en français. 
Comme mon temps libre est limité, vous pouvez constater que tout n'a pas été traduit complètement. Par exemple, les figures de ce manuel se réfèrent en grande partie à la version italienne. Plus urgent, la bibliothèque standard utilise plusieurs fois des descriptions en italien ou en anglais pour les symboles qu'il contient.

Je lance donc un appel à la communauté francophone: si vous repérez une erreur de traduction dans ce manuel ou si vous voulez participer à cette aventure, n'hésitez pas à me contacter. Je serai très heureux de recevoir de l'aide, afin que FidoCadJ commence à se diffuser aussi en France.

\begin{otherlanguage}{english}
\chapter*{Licence FidoCadJ}
\pdfbookmark[1]{Licence FidoCadJ}{Licence FidoCadJ}

 
Copyright \copyright\ 2007-2010  Davide Bucci \href{mailto:davbucci@tiscali.it}{davbucci@tiscali.it}
        
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, version 3 of the License.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see \href{http://www.gnu.org/licenses/}{http://www.gnu.org/licenses/}.
\end{otherlanguage}

\tableofcontents
\pdfbookmark[1]{Table des matières}{Table des matière}

\listoffigures
\pdfbookmark[1]{Liste des figures}{Liste des figures}

\begingroup
\let\clearpage\relax
\let\cleardoublepage\relax
\let\cleardoublepage\relax
\listoftables
\pdfbookmark[1]{Liste des tableaux}{Liste des tableaux}

\endgroup

\chapter{Introduction}
\pagenumbering{arabic}
Dans ce chapitre, nous allons présenter rapidement FidoCadJ. En particulier, nous allons re-parcourir la philosophie qui est à la base de ce logiciel, ainsi que l'histoire de sa création et de son développement.

\section{La philosophie de FidoCadJ}

FidoCad\index{FidoCad} (sans le J à la fin du mot) est un logiciel de dessin vectoriel, particulièrement adapté à être utilisé pour tracer des schémas électriques et des circuits imprimés. Il s'est diffusé particulièrement dans la communauté Usenet italienne, à partir de la fin des années 1990. Il peut être téléchargé gratuitement (en version pour Windows\index{Windows}) depuis la page de son auteur, Lorenzo Lutti\index{Lorenzo Lutti}:

\href{http://www.enetsystems.com/~lorenzo/fidocad.asp}{http://www.enetsystems.com/\~{ }lorenzo/fidocad.asp}

Les fichiers générés par ce logiciel contiennent seulement des codes en format texte et sont très compacts. Ce format convient donc particulièrement bien aux échanges par la voie des groupes de discussion quand des dessins sont nécessaires.
Malheureusement, FidoCad existe seulement dans la version pour Windows\index{Windows}. Qui utilise Linux\index{Linux} peut utiliser  WInE\index{WInE} pour sortir de l'impasse, mais qui utilise un Macintosh doit trouver une solution alternative. J'ai voulu donner une petite contribution, en écrivant FidoCadJ (avec le J à la fin, cette fois). Cet éditeur est écrit en Java\index{Java}, est complètement multi-plateforme et permet de visualiser et de modifier les dessins au format FidoCad\index{FidoCad}.

Qui a déjà utilisé FidoCad\index{FidoCad} dans le passé devrait se trouver rapidement à son aise avec FidoCadJ, car la majorité des commandes sont très similaires. Naturellement, les fonctionnalités de FidoCadJ sont moins développées que celles de FidoCad\index{FidoCad}, ce dernier étant développé depuis plus longtemps. En particulier, la gestion des libraires et des macros\index{macro} est très essentielle.
Mon but a été de fournir une solution minimaliste aux exigences de dessin et de projet de petits circuits. Le tout en respectant la philosophie du logiciel originel, qui est de fournir un outil simple et essentiel.

Bien évidemment, mon but a été d'arriver à une compatibilité totale au niveau des fichiers générés  par FidoCadJ et FidoCad\index{FidoCad} pour Windows\index{Windows}.

Parmi mes intérêts, on trouve la typographie à l'ordinateur et en particulier le logiciel \LaTeX. Pour cette raison, FidoCadJ permet (et ceci à différence de FidoCad) de réaliser l'exportation d'un dessin en plusieurs formats vectoriels et entre autre en Postscript encapsulé (connu aussi comme \textsc{EPS}\index{EPS}). Une autre possibilité intéressante qui est mise à disposition à partir de la version 0.21 de FidoCadJ est l'exportation de schémas électriques vers des scripts exécutables par CadSoft Eagle\index{CadSoft Eagle}. \`A partir de la version 0.22, FidoCadJ permet d'exporter vers le format \textsc{PDF}\index{PDF}.

\section{Histoire du logiciel}
Je suis passionné d'électronique depuis longtemps.
Quand j'ai commencé à fréquenter des groupes de discussion \index{newsgroup} Usenet\index{Usenet} italiens, je me suis aperçu que la majorité des schémas électriques était fournis en utilisant le format du logiciel FidoCad pour Windows\index{FidoCad}, au lieu de faire des graphismes ASCII.
N'utilisant plus Windows depuis plusieurs années, j'ai voulu faire un effort pour combler cette lacune.\graffito{De toute façon, je pense qu'il vaut mieux se mettre à l'\oe uvre, plutôt que se plaindre continuellement que sous un système d'exploitation alternatif à Windows\index{Windows} il n'y a pas tel ou tel autre programme.}

La première chose que j'ai faite a été d'étudier en détail le format utilisé par FidoCad\index{FidoCad} et écrire une appliquette Java\index{Java}, appelée FidoReadJ\index{FidoReadJ}, capable d'interpréter et de montrer un circuit à l'intérieur d'une page web.
J'ai donc fait pas mal de \textit{reverse engineering}  et j'ai cherché un peu partout pour me rendre compte des possibilités et des limitations du format. J'ai aussi téléchargé et étudié les sources en C++ (très lisibles et propres) de FidoCad, mises à disposition par Lorenzo Lutti.
Tout ceci avait lieu plus ou moins vers mars 2007. Quelques mois plus tard, l'appliquette était en ligne sur mon site, utilisée et testée à fond par une partie de la communauté qui fait partie des groupes it.hobby.elettronica\index{it.hobby.elettronica} et it.hobby.fai-da-te\index{it.hobby.fai-da-te}.\footnote{FidoReadJ\index{FidoReadJ} est toujours à disposition, bien que pas complètement à jour, à l'adresse:\\ \href{http://davbucci.chez-alice.fr/index.php?argument=elettronica/fidoreadj/fidoreadj.inc\&language=Francais}{http://davbucci.chez-alice.fr/index.php?argument=elettronica/fidoreadj/fidoreadj.inc}.}

Disposant désormais d'un interprète\index{interprète}\graffito{En réalité, j'avais en tête depuis 1993  l'idée d'écrire un petit logiciel de dessin vectoriel 2D.} du format, le travail qui restait était de mettre au point l'interface utilisateur.
La plus grande partie de ce travail fut réalisée en plusieurs étapes, entre janvier et juillet 2008. FidoCadJ n'est donc pas une adaptation ou un \textit{porting}  de FidoCad pour Windows\index{FidoCad}, mais plutôt une ré-écriture totale du logiciel. Depuis la version 0.21, publiée en janvier 2009, FidoCadJ met à disposition des extensions au format FidoCad original. Beaucoup d'attention a été portée au mantien d'une compatibilité arrière.

Mon choix d'utiliser Java\index{Java} a été motivé par le fait que, au cours de ces dernières années, j'ai utilisé plusieurs systèmes d'exploitation et architectures différents. Je ne voulais donc pas me lier de façon indissoluble à un système en particulier. Pour cette raison, l'effort d'apprendre le framework Cocoa\index{Cocoa} aurait probablement été contrebalancé par une meilleure intégration du logiciel sous MacOSX\index{MacOSX}, mais il aurait rendu FidoCadJ non portable. Finalement, je ne suis pas du tout un informaticien et le temps que je passe à apprendre le langage à la mode à un instant donné je ne le passe pas à faire de l'électronique.

Pour le reste, une simple analyse de la structure du code source de FidoCadJ révèle que je ne suis pas du tout un puriste de Java\index{Java} et de la programmation orientée objets\index{programmation orientée objets}. Beaucoup de solutions sont plus pragmatiques qu'élégantes.

Ce qui compte, plus que le choix d'un langage ou un autre, est l'impression que l'utilisateur a du produit fini. Pour cette raison, je suis toujours à  l'écoute de vos suggestions, pour identifier les directions où il faut améliorer FidoCadJ.
Pour résumer, je ne crois pas que Java\index{Java} soit la panacée ni un langage parfait.
Je crois par contre qu'il est dénigré par beaucoup de personnes parce qu'il y a beaucoup de logiciels de mauvaise qualité qui ont été écrits en ce langage.
Sans avoir des prétentions de perfection et en restant dans le contexte de mes possibilités informatiques, je veux faire en sorte que FidoCadJ NE soit PAS un de ces logiciels.
Encore une fois, je suis à votre écoute!

Depuis novembre 2009, j'ai ouvert un projet FidoCadJ sur SourceForge. Depuis cette page, on peut télécharger les exécutables, ainsi que les manuels de FidoCadJ. Vous pourrez aussi participer activement au développement du logiciel, en accédant au code source, éventuellement avec Subversion, ou le navigateur SVN offert par SourceForge:

 \href{http://fidocadj.svn.sourceforge.net/viewvc/fidocadj/}{http://fidocadj.svn.sourceforge.net/viewvc/fidocadj/} 

Pour participer au développement de FidoCadJ, pas besoin d'être des programmateurs experts: si vous le souhaitez, vous pourrez par exemple traduire le logiciel dans une langue différente de celles disponibles actuellement. Vous pourrez aussi lire avec attention les manuels et corriger les fautes de langue, des inconsistances ou erreurs. Vous pourrez aussi analyser la cohérence et préparer une traduction de la bibliothèque standard.
Vous pouvez aussi participer aux forums, écrire un commentaire sur le logiciel, suggérer des améliorations ou signaler des bogues à corriger.

\chapter{Le dessin avec FidoCadJ}

L'utilisation du logiciel devrait être plutôt intuitive pour qui a déjà utilisé un outil de dessin vectoriel\index{dessin vectoriel}.
L'aspect du logiciel sous MacOSX\index{MacOSX} est visible figure~\ref{fig_fidocadj}\graffito{Les utilisateurs Mac invétérés remarqueront que les menus sont à leur place.}.
Sous d'autres systèmes il y a quelques détails qui changent, mais la philosophie reste strictement la même. La figure~\ref{fig_metal} montre par exemple le résultat que l'on obtient en utilisant le \textit{look and feel}  Metal\index{Metal}, préconisé par Sun\index{Sun}. Nous allons voir quels sont les fonctionnalités et les éléments\index{élément} de dessin offerts. Ces derniers sont les fonctions géométriques de base, à partir desquelles chaque dessin FidoCadJ peut être obtenu.
\begin{figure}
\includegraphics[width=\textwidth]{fidocadj_macosx_fr.png}
\caption{Une session de travail typique de FidoCadJ sous MacOSX Tiger\index{MacOSX}. Le logiciel est localisé en langue française. Dans l'appendice~\ref{specifics}, nous allons décrire les particularités de la version spécifique pour Macintosh\index{Macintosh}.}
\label{fig_fidocadj}
\end{figure}

\begin{figure}
\includegraphics[width=\textwidth]{fidocadj_metal.png}
\caption{Comment se présente FidoCadJ avec le \textit{look and feel}  Metal\index{Metal}.}
\label{fig_metal}
\end{figure}

\section{Les instruments de dessin}
Dans la barre des commandes\index{barre des commandes}, on peut trouver des boutons qui permettent de créer et modifier un dessin. Cet élément se trouve juste en dessous de la barre du titre des fenêtres, comme l'on peut voir aux figures~\ref{fig_fidocadj} et \ref{fig_metal}. Le tableau~\ref{tab_comandi} montre un résumé des commandes disponibles et décrit les actions qui sont possibles pour chaque commande. Chaque bouton de la barre reste enfoncé, une fois que l'on a cliqué dessus.\graffito{Un peu ce qui se faisait dans les radios anciennes et les commutateurs des années 1970.}
Il est donc possible de sélectionner quel élément de dessin\index{élément de dessin} nous allons introduire.\footnote{Pour avoir plus d'informations sur le code associé à chaque élément pendant sa mémorisation, vous pouvez consulter le paragraphe~\ref{sec_primitive}.} En haut à droite, une liste actionnable d'un clic montre la couche de dessin active, ainsi que les autres disponibles (la description de la fonction des couches se trouve au paragraphe~\ref{sec_layer}).

L'aspect de la barre des commandes\index{barre des commandes} est partiellement personnalisable. En particulier, l'utilisateur peut choisir entre deux tailles d'icônes et éventuellement cacher le texte. Cette dernière possibilité permet d'économiser de la place sur l'écran pour la fenêtre du logiciel.
Ces aspects de configuration du logiciel sont disponibles dans la fenêtre qui s'active dans le menu \og  Vue/Préférences\fg \footnote{Sauf sous MacOSX, où cette entrée se trouve dans le menu \og  FidoCadJ\fg .}. Les modifications seront activées en redémarrant FidoCadJ, car \textit{a priori} il ne s'agit pas de quelque chose qui doit être changé tout le temps.


\begin{table}
{\footnotesize
\centering
\begin{tabular}{lp{.7\textwidth}}
\toprule
Touche
 et commande
&
Utilisation
\\
\midrule

\keyevidence{A} ou \keyevidence{Espace}
\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/arrow}%
}
 \textsc{Selection}\index{selection}
&
Sélection d'un ou plusieurs éléments graphiques. Appuyer sur \keyevidence{Control} (ou \keyevidence{Command} sous MacOSX) pour faire des sélections multiples, ou dé-sélectionner un élément.
Faire clic et glisser la souris en maintenant appuyé le bouton gauche, pour sélectionner plusieurs éléments dans une surface rectangulaire.
Appuyer sur \keyevidence{R} pour faire pivoter les éléments sélectionnés.
Appuyer sur \keyevidence{S} pour appliquer un effet miroir.
Un double clic sur un élément en montre les caractéristiques.
\\

\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/magnifier}%
}
\textsc{Zoom}\index{zoom}
&
Cliquer avec le bouton gauche de la souris pour augmenter l'agrandissement.
Cliquer avec le bouton droit pour le réduire.
\\


\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/move}%
}
\textsc{Bouge}\index{bouge}
&
Cliquer et déplacer la souris pour faire bouger la partie du dessin montrée.
\\

\keyevidence{L}

\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/line}%
}
\textsc{Ligne}\index{ligne}
&
Introduire une ligne, ou une série de lignes. Appuyer sur \keyevidence{Esc}, ou faire double clic pour en terminer l'introduction.\\
\keyevidence{T}
\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/text}%
}
\textsc{Texte}\index{texte}
&
Introduire une ligne de texte.
\\
\keyevidence{B}

\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/bezier}%
}
\textsc{Bézier}\index{Bézier}
&
Dessiner une courbe de Bézier.
\\

\keyevidence{P}

\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/polygon}%
}
\textsc{Polygone}\index{polygone}
&
Dessiner un polygone plein ou vide. Double clicquer, ou appuyer sur 
\keyevidence{Esc}, pour terminer l'introduction des points.
\\

\keyevidence{E}

\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/ellipse}%
}
\textsc{Ellipse}\index{ellipse}
&
Dessiner une ellipse pleine ou vide (maintenir enfoncé \keyevidence{Control} pour obtenir un cercle).
\\

\keyevidence{G}

\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/rectangle}%
}
\textsc{Rectangle}\index{rectangle}
&
Dessiner un rectangle plein, ou vide.
\\
\keyevidence{C}

\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/connection}%
}
\textsc{Connexion}\index{connexion}
&
Dessiner une connexion électrique dans le schéma.
\\
\keyevidence{I}

\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/pcbline}%
}
\textsc{Piste C. I.}\index{piste c. i.}
&
Dessiner une piste de circuit imprimé. La largeur par défaut de la piste peut être modifiée dans la fenêtre \og  Vue/Options dessin du circuit\fg .
\\
\keyevidence{Z}

\raisebox{-.2em}{%
\includegraphics[width=1em]{icons/pcbpad}%
}
\textsc{Pastille C. I.}\index{pastille c. i.}
&
Dessiner une pastille pour circuit imprimé. Les dimensions par défaut peuvent être modifiées dans la fenêtre \og  Vue/Options dessin du circuit\fg .
\\
\bottomrule
\end{tabular}
}
\caption{Résumé des commandes de dessin disponibles avec FidoCadJ. La touche montrée dans la colonne la plus à gauche permet de sélectionner rapidement depuis le clavier l'opération désirée. Un clic avec le bouton droit dans la modalité d'insertion des éléments permet d'afficher la fenêtre de modification des propriétés.}
\label{tab_comandi}
\end{table}

Sur la droite de la fenêtre principale, un arbre regroupe les éléments\index{macro} (appelés \og  macros\fg ), mis à disposition par les bibliothèques chargées dans le logiciel. Il suffit de sélectionner un élément de la bibliothèque et ensuite cliquer dans la zone de dessin pour l'insérer. Les bibliothèques de FidoCad\index{FidoCad} incluent tous les symboles électriques classiques, ainsi qu'une bonne collection d'empreintes \index{circuit imprimé!empreintes} pour les circuits imprimés.
\`A partir de la version 0.22, un champ de texte avec une loupe est visible au dessus de la liste en arbre (voir en figure~\ref{fig_ricerca}). Taper du texte à l'intérieur de ce champ permet d'effectuer rapidement une recherche\index{recherche dans les bibliothèques} d'un élément parmi ceux disponibles dans les bibliothèques chargées. En utilisant ensuite les touches flèche haut/bas, on pourra naviguer parmi les éléments trouvés.

\begin{figure}
\centering
\includegraphics[width=.4\textwidth]{ricerca}
\caption{La possibilité de recherche à l'intérieur des bibliothèques chargées.}
\label{fig_ricerca}
\end{figure}

\begin{figure}
\centering
\includegraphics[width=.7\textwidth]{param_testo}
\caption{La fenêtre des paramètres du texte en FidoCadJ.}
\label{fig_param_testo}
\end{figure}

La figure~\ref{fig_param_testo} montre un exemple de ce que l'on obtient en double cliquant, en mode sélection\index{sélection}, sur un élément du dessin; dans ce cas une ligne de texte. Cette fenêtre ne va pas être strictement la même, selon quel élément graphique est modifié.

\section{Dessinons un simple schéma électrique}
Pour comprendre comment le logiciel peut être utilisé, nous allons dessiner un simple schéma électrique, tel celui montré figure~\ref{fig_schema}.
\begin{figure}
\centering
%\includegraphics[width=.5\textwidth]{schema}
\input{images/schema.pgf}
\caption{Voici notre objectif: un miroir de courant réalisé avec des transistors NPN.}
\label{fig_schema}
\end{figure}
Pour commencer, nous pouvons démarrer FidoCadJ, ou créer un nouveau dessin avec l'option \og  Fichier/Nouveau dessin\fg .

Nous allons commencer donc par introduire dans le dessin les symboles des deux transistors\index{transistor}, qui représentent un peu le c\oe ur de notre schéma. Pour effectuer ceci, nous pouvons utiliser les macros mises à disposition par la bibliothèque standard\index{bibliothèque standard}, qui est chargée automatiquement et dont les éléments sont affichés sur la droite de la fenêtre.
La macro qui nous intéresse est appelé \og  NPN sans écran\fg  et se trouve dans la catégorie \og  Diodes et transistors\fg , à l'intérieur de la \og  Librairie standard\fg . En faisant clic pour sélectionner la macro\index{macro} désirée, il est ensuite possible de l'insérer à la position voulue dans le dessin (le logiciel en montre un aperçu) avec un deuxième clic.
À cet instant, nous devrions nous trouver dans une situation similaire à celle montrée figure~\ref{fig_fidocadj_fase1}.

\begin{figure}
\includegraphics[width=\textwidth]{fidocadj_fase1}
\caption{Commençons à positionner les deux transistors.}
\label{fig_fidocadj_fase1}
\end{figure}

On peut remarquer tout de suite que le transistor bipolaire sur la gauche n'est pas orienté comme il conviendrait. Il suffit de cliquer sur le bouton \og  Sélectionner\fg , dans la barre des outils, sélectionner le transistor avec la souris et appuyer sur la touche \keyevidence{S}. Les éléments sélectionnés apparaîtront marqués en vert. Le résultat que l'on va obtenir devrait être similaire à celui montré en figure~\ref{fig_fidocadj_fase2}.

\begin{figure}
\includegraphics[width=\textwidth]{fidocadj_fase2}
\caption{Nous pouvons sélectionner le transistor de gauche et le retourner avec \keyevidence{S}.}
\label{fig_fidocadj_fase2}
\end{figure}

En utilisant l'outil \og  ligne\fg  dans la barre des outils\index{barre des outils}, nous pouvons compléter quelques connexions électriques, jusqu'à nous apercevoir que nous avons commencé le dessin un peu trop près des bords de la surface de dessin. Pas de problème: nous allons nous placer en mode de sélection et cliquer en haut à gauche, en déplaçant la souris jusqu'à en bas à droite, toujours en maintenant enfoncé le bouton gauche. Un rectangle vert apparaîtra, qui nous indiquera que nous sommes en train de sélectionner tous les éléments inscrits à l'intérieur. Nous allons tout sélectionner, comme montré en figure~\ref{fig_fidocadj_fase3}. A ce point, toujours en modalité sélection, il suffit de cliquer sur un élément sélectionné quelconque et déplacer la souris, pour déplacer tous les éléments dans la position souhaitée.

\begin{figure}
\includegraphics[width=\textwidth]{fidocadj_fase3}
\caption{Nous sommes trop haut: nous pouvons tout sélectionner et déplacer vers le bas de la fenêtre.}
\label{fig_fidocadj_fase3}
\end{figure}

Nous allons donc continuer en introduisant les parties manquantes du circuit, en particulier une résistance\index{résistance} (Librairie standard/Composants discrets/Résistance), ainsi que le terminal d'alimentation positive (Librairie standard/Symboles de base/Terminal +).
On devra faire pivoter ce dernier pour lui donner l'orientation souhaitée. Il suffira de le sélectionner et appuyer sur la touche \keyevidence{R}, jusqu'à obtenir le résultat voulu. À ce stade, nous devrions avoir quelque chose de similaire au résultat montré en figure~\ref{fig_fidocadj_fase4}.

\begin{figure}
\includegraphics[width=\textwidth]{fidocadj_fase4}
\caption{Le circuit, presque terminé.}
\label{fig_fidocadj_fase4}
\end{figure}

Il ne manque plus maintenant que le texte et la flèche qui représente le sens du courant. Pour cette dernière, il y a la macro \og  Flèche\fg  dans \og  Librairie standard/Symboles de base\fg . Pour le texte, il faut utiliser le bouton \og  Texte\fg \index{Texte}, dans la barre des commandes, et cliquer sur le dessin à la position où le texte devra apparaître. Un texte \og  String\fg  apparaîtra et pourra être changé en cliquant dessus avec le bouton droit de la souris.
Le nom et le modèle du transistor utilisé (en réalité, on utiliserait un couple de transistors sur le même substrat) sont spécifiés à l'intérieur des champs \og  Name\fg  et \og  Value\fg , que l'on obtient en faisant double clic en modalité \og  Sélection\fg  sur la macro.\footnote{La possibilité d'associer un nom et une valeur à une macro, c'est à dire à un symbole d'un composant, représente une extension de FidoCadJ\index{FidoCadJ} par rapport à FidoCad\index{FidoCad}. Lire le paragraphe~\ref{FCJ_extension} pour avoir plus d'informations sur la compatibilité.} 
Vous pouvez voir en figure~\ref{fig_param_testo} le résultat. Une dimension de la police adaptée pour travailler avec les schémas est de 4 unités en vertical et 3 en horizontal.
Le circuit terminé est montré en figure~\ref{fig_fidocadj_fase5}.

\begin{figure}
\includegraphics[width=\textwidth]{fidocadj_fase5}
\caption{Voici le circuit terminé, dans toute sa splendeur.}
\label{fig_fidocadj_fase5}
\end{figure}

Pour les curieux, voici le code\index{code} textuel qui décrit le circuit, et qui pourra être copié à l'intérieur d'un message dans un groupe de discussion\index{groupe de discussion}, un message de courrier électronique\index{courrier électronique}, ou un forum\index{forum}. Pour le voir, il suffit de sélectionner \og  Texte du circuit\fg , dans le menu \og  Circuit\fg . \begin{lstlisting} 
[FIDOCAD]
MC 95 65 0 0 280
FCJ
TY 115 60 4 3 0 0 0 * Q1B
TY 115 65 4 3 0 0 0 * LM394
MC 55 65 0 1 280
FCJ
TY 20 60 4 3 0 0 0 * Q1A
TY 20 65 4 3 0 0 0 * LM394
LI 55 65 95 65 0
LI 40 75 40 95 0
LI 110 75 110 95 0
LI 40 40 40 55 0
MC 40 30 0 0 115
LI 40 15 40 30 0
LI 30 15 40 15 0
MC 30 15 2 0 010
LI 40 50 60 50 0
LI 60 50 60 65 0
SA 60 65 0
SA 40 50 0
LI 110 45 110 55 0
LI 110 35 110 40 0
LI 110 25 110 30 0
MC 40 95 0 0 040
MC 110 95 0 0 040
TY 45 30 4 3 0 0 0 * 10 k
TY 115 50 4 3 0 0 0 * I
MC 110 50 1 0 074
\end{lstlisting} 
Si vous voulez comprendre les détails de ce format, vous trouverez une description détaillée au chapitre~\ref{chap_formato}.

Vous n'êtes pas forcé d'utiliser la fenêtre \og  Texte du circuit\fg ; il suffit en fait de sélectionner la partie du circuit qui vous intéresse et la coller à l'intérieur du message: le code\index{code} apparaîtra de façon automatique.

\section{Les couches (\textit{layers})}
\label{sec_layer}

Pour comprendre le principe des couches\index{couches} -- ou \textit{layers} en anglais -- imaginez un dessin fait sur des transparents pour rétroprojecteur. Le résultat final est donné par la superposition de plusieurs transparents. Chaque couche est distinguée par une couleur spécifique et on peut choisir de la représenter ou non.
Cette façon d'agir est commune à beaucoup d'outils de dessin technique ou électronique, car il permet de représenter facilement plusieurs parties du circuit qui seront superposées par exemple dans un circuit imprimé\index{circuit imprimé}.

FidoCadJ permet d'utiliser 16 couches, numérotées de 0 à 15. La fonction de chaque couche est basée sur une convention et en particulier la couche 0 est utilisée pour les schémas électriques\index{schémas électriques}, la couche 1 pour les circuits, du côté des soudures\index{soudures}, la couche 2 pour le cuivre côté composants et la couche 3 pour la sérigraphie\index{sérigraphie}.
Les couches qui restent ne sont pas associées à une fonction en particulier et peuvent être utilisées librement comme vous le souhaitez. Le nom et la couleur\index{couleur} de chaque couche peuvent être spécifiés à travers le menu \og  Vue/Options couches\fg . Dans le même menu, on peut aussi décider si une couche doit être montrée à l'écran, ou pendant l'impression.

L'ordre des couches est important. En particulier, les couches d'ordre plus faible seront dessinées en premier. Des dessins présents sur les couches successives pourront donc couvrir ce qui se trouve dans les couches d'ordre faible.

\section{La grille}
L'unité logique\index{unité logique} utilisée par FidoCadJ est de 5 mils (127 microns) et l'on ne peut pas avoir des demi-unités, dans le sens où les coordonnées de chaque élément doivent toujours être entières.
Cela procure une résolution suffisante, acceptable pour les schémas électriques et la plupart des circuits imprimés.

Pour nous rendre la vie plus facile, FidoCadJ peut utiliser une grille\index{grille} plus grossière, et faire en sorte que chaque opération réalisée avec la souris soit automatiquement alignée à cette grille.
Pour cette raison, deux boutons \og  Montrer la grille\fg  et \og  Bloquer sur la grille\fg  sont présents. Ils permettent de montrer les points qui font partie de la grille, et d'activer ou non la fonction d'alignement automatique. Le pas de la grille peut être sélectionné à l'intérieur de la fenêtre active avec le menu \og  Vue/Options de dessin du circuit\fg .

\section{Dessiner un simple circuit imprimé}
Pour prendre en main tous les concepts vus jusqu'à maintenant, la meilleure façon de procéder est de voir comment il faut procéder pour dessiner un circuit imprimé à l'aide de FidoCadJ.

À la différence d'autres programmes de CAO électrique qui sont sans doute très puissants, mais aussi plutôt difficiles à utiliser, FidoCadJ fournit en pratique une version électronique des vieux transferts R41\index{transferts R41}.
Bien évidemment, le fait de travailler à l'ordinateur permet de bénéficier de toute la flexibilité offerte par ce moyen.

Il faut néanmoins remarquer que le projet d'un circuit imprimé\index{circuit imprimé}, surtout si ce dernier est complexe, n'est pas une tâche très simple. \graffito{Que le lecteur prenne courage: quelques tâtonnements sur une feuille de brouillon, avec un crayon (et beaucoup de gommes) lui permettront de préciser ses idées avant de passer à l'ordinateur et, finalement, de gagner du temps.}
Il existe, certes, des placeurs automatiques\index{placeur automatique}, ainsi que des routeurs automatiques\index{routeur automatique} et ils promettent des miracles dans les brochures publicitaires des fournisseurs. Il est cependant encore un fait que le routage est un travail qui ne peut pas se passer de l'intelligence et de l'expérience de l'opérateur.
FidoCadJ fournit un éditeur rapide et immédiat pour dessiner des petits circuits imprimés à la portée d'un amateur. Nous allons voir rapidement comment il faut se comporter pour en obtenir un très simple, mais raisonnablement complet.

Ce que je conseille à qui désire effectuer ce travail est de se faire une idée suffisamment précise de l'emplacement des composants et des pistes principales avant de commencer. Le principe est de faire croiser le moins de connexions que possible\index{croiser les connexions}.

Nous allons tricher, et nous allons partir directement du résultat que nous souhaitons obtenir, montré en figure~\ref{fig_amplificateur}. Il s'agit d'un simple amplificateur à un étage, réalisé autour d'un transistor bipolaire (BC547 ou similaire) monté en émetteur commun.
Pour comprendre la façon de travailler de FidoCadJ, imaginons la plaque comme si elle était transparente, en la regardant du côté des composants. Pour cela, nous avons intérêt à utiliser la sérigraphie\index{sérigraphie}, qui nous aidera à nous repérer, à partir du moment où il y aura plusieurs composants sur le circuit. La sérigraphie est un guide utile, même si souvent elle ne sera pas transférée sur la plaque lors d'une fabrication \og  maison\fg .

\begin{figure}
\centering
\includegraphics[width=.5\textwidth]{amplificateur}
\caption{Un très simple étage amplificateur à émetteur commun.}
\label{fig_amplificateur}
\end{figure}

La première chose que je conseille de faire est de disposer les composants, même de façon approximative. Dans notre cas, il faudra placer le transistor (bibliothèque \og  PCB footprints/Semiconducteurs 3 pattes/TO92\fg ), les résistances (bibliothèque \og  PCB footprints/Résistances/Résistance 1/W 0,4 i\fg ), les condensateurs électrochimiques (\og  PCB footprints/Condensateurs électrochimiques/Vert. diam 5 pas 2,5\fg ).
Il peut être utile de marquer tout de suite la dimension totale souhaitée du circuit, en introduisant un rectangle vide sur la couche des sérigraphies (la 3). Pour réaliser cela, il suffit de se placer sur la couche souhaitée à travers la liste déroulante en haut à droite, et utiliser ensuite l'élément rectangle\index{rectangle} dans la barre des commandes.

Nous devrions obtenir plus ou moins le résultat montré en figure~\ref{fig_amplificateur_phase1}.

\begin{figure}
\includegraphics[width=\textwidth]{amplificateur_phase1}
\caption{Les composants sont placés sur la plaquette.}
\label{fig_amplificateur_phase1}
\end{figure}

Nous allons donc définir les régions couvertes de cuivre, qui nous fourniront les alimentations positive et négative. Pour réaliser cela, il va falloir utiliser des polygones\index{polygone}, en choisissant l'élément correspondant dans la barre des outils. Une fois créé chaque polygone, nous allons spécifier qu'il doit être plein, en faisant clic droit sur un de ses côtés et en cochant l'option correspondante au menu contextuel qui apparaît alors.
Faites attention aussi à travailler sur la couche\index{couche} correcte, c'est à dire la 1: le cuivre du côté des soudures.
L'utilisation de polygones permet d'obtenir des plans d'alimentation constituant des connexions à basse impédance parasite, ce qui est généralement souhaitable. Avec un peu d'attention, normalement vous devriez avoir le résultat montré figure~\ref{fig_amplificateur_phase2}.\graffito{Attention à la largeur des pistes: ce qui a l'air d'être une autoroute sur l'écran, se révélera dans la réalité une fine ligne prête à se décoller pendant la soudure.}

\begin{figure}
\includegraphics[width=\textwidth]{amplificateur_phase2}
\caption{Nous avons rajouté les régions de masse et d'alimentation positive à l'aide de deux polygones\index{polygone}.}
\label{fig_amplificateur_phase2}
\end{figure}

Il faudra ensuite compléter les connexions électriques, en utilisant les éléments \og  pistes c. i.\fg \index{piste c. i.} (pistes pour circuit imprimé). J'ai choisi pour ce circuit une largeur de 10 unités (1,27~mm), qui est une largeur plutôt commode par exemple pour faciliter les soudures. 
\begin{figure}
\includegraphics[width=\textwidth]{amplificateur_phase3}
\caption{Nous avons rajouté les connexions de masse et l'alimentation positive, à l'aide de deux polygones\index{polygones}.}
\label{fig_amplificateur_phase3}
\end{figure}

Nous avons besoin de quelques connecteurs: pour pouvoir injecter le signal, ainsi que pour le récupérer et fournir l'alimentation au circuit. Nous allons utiliser une pastille prévue pour un condensateur au polyester, qui va probablement avoir la dimension correcte. FidoCadJ est finalement une évolution des transferts Letraset\index{transferts Letraset}\dots

Nous rajoutons aussi des repères pour l'alimentation $+$ et $-$ du côté cuivre, avec un condensateur céramique en parallèle. Nous allons aussi rajouter l'écriture sur la partie supérieure de la plaque. Pour écrire sur le côté cuivre, il faudra sélectionner la couche correspondante et écrire en miroir\index{écrire en miroir}. Ceci est possible en accédant aux propriétés de l'élément, en faisant clic avec le bouton droit sur le texte à modifier.
Faites quelques essais pour obtenir les dimensions optimales de la police. Pour commencer, je conseille de garder un rapport approché de 3/4 entre les tailles horizontale et verticale des caractères\index{tailles des caractères}.
La figure~\ref{fig_amplificateur_phase4} montre le résultat obtenu avec des tailles de 11 unités en horizontal et 18 en vertical.

\begin{figure}
\includegraphics[width=\textwidth]{amplificateur_phase4}
\caption{Voici le circuit imprimé\index{circuit imprimé}, presque terminé.}
\label{fig_amplificateur_phase4}
\end{figure}

À ce stade, il ne manque plus que le texte avec les noms des composants, qui pourra être positionné sur la couche 3, qui est dédiée à la sérigraphie.
Une image de FidoCadJ qui montre le circuit terminé est visible en figure~\ref{fig_amplificateur_complet}.

\begin{figure}
\includegraphics[width=\textwidth]{amplificateur_complet}
\caption{Le travail terminé, avec toutes les sérigraphies.}
\label{fig_amplificateur_complet}
\end{figure}

Une fois le travail terminé, il faudra probablement imprimer\index{impression} le circuit sur calque, de façon à utiliser la photo-gravure\index{photo-gravure}, ou les méthodes de transfert direct du toner\index{transfert direct du toner}. Pour cette raison, seules les pistes de cuivre devront apparaître lors de l'impression.
Pour obtenir ce résultat, il faudra en premier lieu cacher toutes les couches qui ne devront pas être montrées. Cela peut être fait à travers la fenêtre de dialogue qui apparaît en cliquant sur le menu \og  Vue/Options des couches\fg . Dans notre cas, il suffira de rendre invisible la couche 3, qui présente les sérigraphies. Le logiciel ne montrera plus ensuite que le cuivre du côté des soudures.

Il faudra donc imprimer ce que l'on montre à l'écran (SANS l'adapter à la page, bien évidemment, de façon à respecter les dimensions choisies), et sélectionner l'impression en noir et blanc. Il pourra être utile d'imprimer en miroir, si la technique que vous comptez utiliser pour réaliser le circuit imprimé\index{circuit imprimé} le demande.

Comme notre circuit imprimé est relativement petit, à grandeur naturelle il sera imprimé dans un coin d'une feuille au format standard ISO-UNI A4\index{A4}, comme l'on peut voir en figure~\ref{fig_amplificateur_impression}.

\begin{figure}
\centering
\fbox{
\includegraphics[width=0.6\textwidth]{amplificateur_impression}}
\caption{Le circuit imprimé, tel qu'il apparaît imprimé en miroir sur une page en format ISO-UNI A4.}
\label{fig_amplificateur_impression}
\end{figure}

Pour les curieux, voici le code du circuit imprimé que l'on vient d'obtenir dans les exemples ci dessus:
\begin{lstlisting} 
[FIDOCAD]
TY 320 10 18 11 0 4 1 * Darwin Ampli Esempio 08 
TY 85 240 12 8 0 5 1 * + 
TY 44 239 12 8 0 5 1 * - 
PL 35 90 35 225 10 1
PL 55 130 95 130 10 1
PL 250 130 305 130 10 1
PL 215 130 230 130 10 1
PL 195 140 215 130 10 1
PL 115 130 175 130 10 1
MC 155 220 3 0 PCB.R01
MC 75 80 0 0 PCB.R01
MC 270 185 2 0 PCB.R01
MC 270 80 2 0 PCB.R01
MC 230 130 3 0 PCB.CE00
MC 115 130 1 0 PCB.CE00
MC 40 175 0 0 PCB.CC50
PL 190 80 190 120 10 1
PL 190 140 190 185 10 1
PL 155 80 155 120 10 1
PL 155 120 175 130 10 1
PL 155 140 175 130 10 1
PP 30 30 30 105 90 105 130 55 215 55 260 105 320 105 320 30 1
PP 320 240 320 155 260 155 215 205 135 205 90 155 55 155 55 240 1
MC 190 120 0 0 PCB.TO92
MC 305 90 1 0 PCB.CPBX352
MC 55 90 1 0 PCB.CPBX352
MC 80 225 2 0 PCB.CPBX352
TY 290 65 12 8 0 0 3 * Out 
TY 40 60 12 8 0 0 3 * In 
TY 95 225 12 8 0 0 3 * Alimentazione 
TY 70 190 12 8 0 0 3 * C3 
TY 230 95 12 8 0 0 3 * C2 
TY 115 150 12 8 0 0 3 * C1 
TY 120 170 12 8 0 0 3 * R4 
TY 220 200 12 8 0 0 3 * R3 
TY 230 55 12 8 0 0 3 * R2 
TY 100 55 12 8 0 0 3 * R1 
RV 30 5 320 255 3
\end{lstlisting}

\section{Utilisation d'une règle}\index{ruler}
Pendant le dessin d'un circuit imprimé, il est souvent utile d'effectuer des mesures de distance. Par exemple, on peut vouloir vérifier l'épaisseur d'une piste, la distance entre deux régions cuivrées, ou la dimension totale d'une carte. FidoCadJ offre depuis la version 0.23.2 la possibilité de positionner arbitrairement une règle dans le dessin. Il suffit en modalité sélection de cliquer avec la touche droite de la souris et bouger le pointeur en maintenant appuyé la touche. FidoCadJ tracera une règle verte, comme montré figure~~\ref{fig_fidocadj_righello}. 
Si cette opération avec la souris n'est pas pratique sous votre système d'exploitation, vous pouvez alternativement faire click gauche et déplacer, mais en gardant appuyée la touche \keyevidence{Shift} du clavier.
\begin{figure}
\includegraphics[width=\textwidth]{fidocadj_righello}
\caption{Cliquer droit et déplacer en modalité sélection le pointeur pour montrer une règle.}
\label{fig_fidocadj_righello}
\end{figure}
La longueur totale de la règle est montrée dans les unités logiques de FidoCadJ \index{unités logiques} et en millimètres. Cela est utile lorsque le dessin sera imprimé à l'échelle 1:1, comme c'est le cas pour les circuits imprimés.

\section{Flèches et styles de trait}
À partir de la version 0.23 de FidoCadJ, j'ai rajouté des possibilités en matière de dessin. Vous pouvez maintenant doter de flèches\index{flèche} les extrémités des segments et des courbes de Bézier\index{Bézier}.
FidoCadJ offre maintenant la possibilité de choisir de quel côté les dessiner, ainsi que avec quel style parmi ceux disponibles. J'ai rajouté aussi des styles de trait interrompu\index{trait interrompu}, pour faciliter le dessin de schémas techniques. La figure~\ref{fig_gyrator} montre un exemple dans lequel on a dessiné un étage analogique (un GIC) à l'intérieur d'un rectangle avec trait interrompu et avec une flèche au bout d'un tracé de Bézier\index{Bézier}.
En faisant double clic sur cet élément, la fenêtre des paramètres obtenue est visible figure~\ref{fig_parametri_bezier}. 

Vous pouvez remarquer que l'option \og  Arrow at start\fg  (flèche au début) est activée. Le logiciel dessinera une flèche au bout de la courbe, orientée de façon correcte. Vous pouvez choisir plusieurs styles de flèche\index{flèche} et de trait\index{trait}, dans les listes actionnables à côté des points \og  Arrow style\fg  et \og  Dash style\fg . Faites quelques tests pour comprendre comment fonctionne le mécanisme.

\begin{figure}
\includegraphics[width=\textwidth]{gyrator}
\caption{Un schéma électrique d'un GIC\index{GIC} dans lequel on a utilisé quelques extensions de FidoCadJ.}
\label{fig_gyrator}
\end{figure}
\begin{figure}
\centering
\includegraphics[width=.7\textwidth]{parametri_bezier}
\caption{La fenêtre des paramètres d'un tracé de Bézier, dans un dessin FidoCadJ.}
\label{fig_parametri_bezier}
\end{figure}
La possibilité de choisir un type de trait et d'ajouter des flèches aux lignes n'est pas prévue dans le format FidoCad originel. Cela implique que malheureusement la compatibilité à l'arrière vers FidoCad\index{FidoCad} pour Windows n'est pas assurée.
Quand on choisit d'utiliser une extension FidoCadJ, il faut être bien conscient de ce que l'on fait. Si l'on a besoin de maintenir une compatibilité avec des utilisateurs de FidoCad\index{FidoCad} et non pas FidoCadJ, on peut activer l'option \og  Modalité de compatibilité avec FidoCad\fg  à l'intérieur de l'onglet \og  Extension FidoCadJ\fg  dans la fenêtre \og  Préférences de FidoCadJ\fg , avant de commencer le travail.
De cette façon, on ne pourra pas introduire des éléments graphiques qui n'ont pas été prévus par FidoCad et l'on obtiendra des dessins parfaitement compatibles avec ce dernier. Pour plus d'informations, consulter le paragraphe~\ref{FCJ_extension}.

\section{Exportation}
Personnellement, une des choses que je trouve les plus intéressantes et utiles de FidoCadJ est la possibilité de créer des petits schémas pour une utilisation typographique. Pour cette raison, je me suis efforcé de permettre et faciliter la mise au point des exportations\index{exportation} des dessins dans des formats graphiques divers et variés.

Pour réaliser une exportation du dessin courant, il suffit de sélectionner l'entrée \og  Exportation\fg  dans le menu \og  Fichier\fg . Le tableau~\ref{tab_esportazione} montre une liste des formats graphiques qui sont actuellement disponibles pour l'exportation.
\graffito{Un format vectoriel\index{format vectoriel} mémorise les éléments du dessin. Un format à matrice de points\index{format à matrice de points} travaille sur une matrice de pixels à une résolution donnée.}

Pour chaque format, le tableau spécifie si c'est vectoriel ou à matrice de points. Quand c'est possible, il est préférable d'utiliser systématiquement des formats vectoriels pour l'exportation, de façon à obtenir les résultats les meilleurs dans toutes les situations.\footnote{La structure du code de FidoCadJ permet de rajouter avec simplicité des formats vectoriels pour l'exportation. Si vous voulez me donner un coup de main\dots}

Pour les formats matriciels, il peut être avantageux d'utiliser l'option \og  anticrénelage\fg , pour limiter l'effet visuel \og  en marches d'escalier\fg  des lignes et des éléments du dessin. Les informations sur la résolution, ainsi que l'option anticrénelage ne sont pas utilisées lors de l'exportation dans un format vectoriel.

L'option \og  Noir et blanc\fg  permet d'imprimer tous les éléments visibles seulement en noir plein. Cette fonctionnalité est utile par exemple quand on est en train de préparer des typons pour photo-gravure.
\begin{table}
\centering
\begin{tabular}{lp{.7\textwidth}}
\toprule
Format
&
Commentaires
\\
\midrule
\textsc{jpg}\index{JPG}
&
Format à matrice de points très diffusé. La compression utilisée est avec pertes\index{compression avec pertes} et ce format n'est pas adapté à l'exportation de schémas comme ceux produits par FidoCadJ.
\\
\textsc{png}\index{PNG}
&
Format compressé, matriciel. À défaut de format vectoriel, ce format est celui le plus adapté à être utilisé pour des schémas et des graphiques.
\\

\textsc{svg}\index{SVG}
&
Format vectoriel standard proposé par le W3C. Certains navigateurs Internet (comme les versions récentes de Safari\index{Safari}) permettent de le visualiser dans une page web. Bon format à utiliser pour des graphiques et des schémas, il permet d'utiliser des logiciels tels qu'Inkscape\index{Inkscape} pour retoucher les dessins. Actuellement, des limitations existent pour le texte ayant une orientation différente de l'usuelle.
\\
\textsc{eps}\index{EPS}
&
Format vectoriel Postscript\index{Postscript} encapsulé, très utilisé par les logiciels de graphisme professionnels.  Ce format a été utilisé pour obtenir la figure~\ref{fig_amplificateur}, à la page~\pageref{fig_amplificateur}, en passant par une conversion en \textsc{pdf}, car ce manuel a été produit avec \textsc{pdf}\LaTeX\index{pdfLaTeX@\textsc{pdf}\LaTeX}.
\\
\textsc{pgf}\index{PGF}
&
Format vectoriel prêt à être utilisé directement à l'intérieur d'un fichier source \LaTeX\index{LaTeX@\LaTeX}, à l'aide du paquet \textsl{pgf}, mis à disposition dans l'archive CTAN. Cette modalité d'exportation a été conçue pour exporter les schémas électriques et fournit un code qui peut être modifié à la main. Les textes ne sont pas interprétés: cela permet d'introduire du code \LaTeX\index{LaTeX@\LaTeX} directement à l'intérieur du dessin. Cette technique a été utilisée dans ce manuel pour obtenir la figure~\ref{fig_schema}, à la page~\pageref{fig_schema}.
\\
\textsc{scr}\index{SCR}
&
FidoCadJ, à partir de la version 0.21, permet d'exporter un dessin vers un script interprétable par le logiciel CadSoft\index{CadSoft} Eagle\index{Eagle}. Pour se servir de cette possibilité, il faut copier dans le répertoire  \lstinline!lbr! d'Eagle le fichier \lstinline!FidoCadJLIB.lbr!, téléchargeable depuis le site de FidoCadJ. 
Actuellement, l'exportation est possible seulement pour les schémas électriques qui adoptent les symboles les plus utilisés. Les pastilles et les pistes pour les circuits imprimés ne sont pas exportés.\\
\textsc{pdf}\index{PDF}
&
Le format Portable Document Format, d'Adobe. Voir le texte pour ce qui concerne les limitations sur les polices à utiliser\index{polices}.
\\
\bottomrule
\end{tabular}
\caption{Liste des formats d'exportation disponibles avec FidoCadJ.}
\label{tab_esportazione}
\end{table}
Il faut pourtant dire quelques mots sur l'exportation en \textsc{pdf} faite par FidoCadJ. Le logiciel ne peut pas inclure des polices à l'intérieur du fichier généré. Cela veut dire que l'on obtiendra des fichiers identiques à l'original seulement pour les dessins qui utilisent les polices\index{polices} standard type 1 à 14 points:
\begin{itemize}
\item{Courier\index{Courier}: Police avec empattements à espacement fixe. On fait automatiquement la conversion en Courier des écritures faites avec Courier New\index{Courier~New}.}
\item{Times\index{Times}: Police avec empattements à espacement variable. Le logiciel convertit en Times aussi les éléments en Times New Roman\index{Times~New~Roman}, ainsi qu'en Times Roman\index{Times~Roman}}.
\item{Helvetica\index{Helvetica}: Police sans empattements à espacement variable. On y convertit aussi les éléments faits en Arial\index{Arial}.}
\item{Symbol\index{Symbol}: contient plusieurs symboles.}
\end{itemize}
Ces polices\index{polices} sont pratiquement toujours disponibles presque partout. C'est donc une très bonne idée de les utiliser de façon systématique.

\section{Options de la ligne de commande}
FidoCadJ est distribué sous la forme d'un fichier \lstinline!.jar!\index{jar}, 
c'est à dire une archive Java\footnote{Sauf dans la version pour Apple \index{Macintosh}Macintosh, pour laquelle il y a une application distribuée sous la forme traditionnelle.}
Dans beaucoup de systèmes d'exploitation, pour lancer l'application il est probablement suffisant de faire double clic sur le fichier, à condition d'avoir une version de Java\index{Java} installée sur la machine. Dans la terminologie Sun\index{Sun}, ce qu'il faut avoir est le
JRE\index{JRE}, c'est à dire \og  Java Runtime Environment\fg : tout ce qu'il faut pour exécuter un logiciel écrit en Java (mais pas pour l'écrire; pour cela il faut le SDK\index{SDK}\dots).

Dans quelques situations, il peut être utile de faire démarrer FidoCadJ depuis l'invite de commande (le \og  terminal\index{terminal}\fg  des systèmes Unix\index{Unix}, ou le \og  MS-DOS prompt\index{MS-DOS prompt}\fg  pour les systèmes Windows\index{Windows}).
Pour cela, il suffit d'utiliser la commande \lstinline!java!, avec l'option \lstinline!-jar!:
\begin{lstlisting}
java -jar fidocadj.jar
\end{lstlisting}

Si un fichier FidoCad est spécifié dans la commande\index{ligne de commande}, FidoCadJ va essayer de l'ouvrir. Par exemple, observons la commande (valable dans un système Unix\index{Unix}):
\begin{lstlisting}
java -jar fidocadj.jar ~/FidoCadJ/test.fcd
\end{lstlisting}
FidoCadJ sera démarré et essayera d'ouvrir le fichier \lstinline!~/FidoCadJ/test.fcd! (à condition que ce dernier existe!).

FidoCadJ peut faire d'autres choses intéressantes. L'option \lstinline!-h! montre une liste des possibilités ouvertes à l'utilisateur:
\lstset{basicstyle=\tiny\ttfamily}
	 	 
\begin{lstlisting}
[davidebucci@Darwin]$ java -jar fidocadj.jar -h

This is FidoCadJ, version 0.23.3.
By Davide Bucci, 2007-2010.

Use: java -jar fidocadj.jar [-options] [file] 
where options include:

 -n     Does not start the graphical user interface

 -d     Set the extern library directory
        Usage: -d dir
        where 'dir' is the directory you want to specify.

 -c     Convert the given file to a graphical format.
        Usage: -d sx sy [eps|pdf|svg|png|jpg|fcd|sch] outfile
        If you use this command line option, you must specify a FidoCad file to convert.
        An alternative is to specify the resolution in pixels per logical unit by
        preceding it by the letter 'r' (without spaces), instead of giving sx and sy.

 -s     Print the size in logical coordinates of the specified file.

 -h     Print this help. and exit.

 [file] This is the optional (except if you use the -d or -s options) FidoCad file to load at
        startup time.

Example: load and convert a FidoCad drawing to a 800x600 pixel png file without using the GUI.
java -jar fidocadj.jar -n -c 800 600 png out1.png test1.fcd

Example: load and convert a FidoCad drawing to a png file without using the GUI.
         Each FidoCadJ logical unit will be converted in 2 pixels on the image.
java -jar fidocadj.jar -n -c r2 png out2.png test2.fcd


[davidebucci@Darwin]$ 
\end{lstlisting}
\lstset{language=FIDOCAD,
    basicstyle=\small\ttfamily}

L'option la plus simple est \lstinline!-n!, avec laquelle le logiciel\dots ne fait rien, c'est à dire ne fait pas demarrer l'interface utilisateur graphique et redonne tout de suite la main à l'utilisateur. Bien évidamment, cette option n'est pas très utile toute seule, mais ouvre des possibilités intéressantes en combinaison avec les autres options disponibles.
	 	 
L'option \lstinline!-d! permet de spécifier un répertoire où FidoCadJ ira chercher les bibliothèques optionnelles. L'option \lstinline!-c! permet à l'utilisateur de réaliser une conversion d'un fichier FidoCadJ dans un format graphique, parmi ceux disponibles. Il s'agit donc de l'option probablement la plus intéressante, surtout avec l'option \lstinline!-n!, qui permet de contrôler la conversion sans utiliser l'interface graphique.
Voyons par exemple le premier cas décrit dans le message d'aide du logiciel:
\begin{lstlisting}
java -jar fidocadj.jar -n -c 800 600 png out.png test.fcd
\end{lstlisting}

FidoCadJ est fait démarrer, sans que l'interface graphique soit activée, en exportant en format png le fichier 
\lstinline!test.fcd!. Le fichier produit sera \lstinline!out.png! et aura une dimension totale de 800 par 600 pixel. Il y a une version alternative de l'option \lstinline!-c!, qui permet de spécifier en combien de pixels une unité logique FidoCadJ doit être convertie. Comme FidoCadJ n'utilise pas des coordonnées fractionnaire, choisir deux ou trois pixels par unité permet d'être sûr que les schémas et les dessins convertis seront toujours compréhensibles. On peut d'ailleurs utiliser des facteurs de conversion non entiers.
	 	 
Pour connaître la dimension en unités logiques d'un schéma, il suffit d'utiliser l'option \lstinline!-s!. Il faut se rappeler que FidoCadJ insère un marge de 20 pixels par rapport aux dimensions calculées à partir de la résolution en pixel par unités logiques et l'effective dimension en pixel du dessin converti.
	 	 
Une autre possibilité intéressante, même si en toute rigueur cette caractéristique est plus propre à Java\index{Java} qu'à FidoCadJ lui même, est qu'il est possible de modifier l'apparence du logiciel en changeant ce qu'on appelle en jargon Java le \textit{look and feel}\index{look \& feel}). 

%Ceci peut être utile par exemple pour intégrer plus le logiciel à l'intérieur d'un environnement Windows\index{Windows}. Dans ce cas, la ligne de commande à utiliser est la suivante:\graffito{Il faut reconnaître que parfois Java n'est pas très synthétique.}
%\begin{lstlisting}
%java -Dswing.defaultlaf=com.sun.java.swing.plaf.windows.WindowsLookAndFeel -jar fidocadj.jar 
%\end{lstlisting}
%Pour des raisons de licence, le \og  look and feel\fg  Windows\index{Windows} n'est disponible que sur les systèmes Microsoft\index{Microsoft}. 
Vous pouvez néanmoins jouer avec l'aspect que vous préférez depuis l'invite des commandes, sans modifier une seule ligne de code. Voici quelque chose que les utilisateurs Linux\index{Linux} probablement vont apprécier: l'aspect GTK+\index{GTK+}:
\begin{lstlisting}
java -Dswing.defaultlaf=com.sun.java.swing.plaf.gtk.GTKLookAndFeel -jar fidocadj.jar 
\end{lstlisting}
Ou aussi le classique \textit{look and feel}  Motif\index{Motif}, qui est montré dans la figure~\ref{fig_fidocadj_motif}:
\begin{lstlisting}
java -Dswing.defaultlaf=com.sun.java.swing.plaf.motif.MotifLookAndFeel -jar fidocadj.jar 
\end{lstlisting}
\begin{figure}
\includegraphics[width=\textwidth]{fidocadj_motif}
\caption{L'aspect de FidoCadJ sous MacOSX\index{MacOSX}, en utilisant le \textit{look and feel}  Motif.}
\label{fig_fidocadj_motif}
\end{figure}
Il est clair que les commandes que l'on vient de voir doivent être utilisées depuis l'invite de commande, une fois que l'on se trouve dans le même répertoire où l'on a placé le fichier \lstinline!fidocad.jar!, en écrivant tout sur la même ligne.

\lstset{language=FIDOCAD,
basicstyle=\small\ttfamily}

\section{Gestion des bibliothèques}
FidoCadJ permet de spécifier un répertoire à l'intérieur duquel on trouve des fichiers de bibliothèque\index{bibliothèque} (avec l'extension \lstinline!.fcl!) qui seront chargés à chaque démarrage du logiciel.
Pour faire cela, il suffit d'ouvrir la fenêtre \og  Vue/Options\fg  et spécifier le répertoire dans la ligne \og  Sélectionner le répertoire bibliothèques\fg . Si FidoCadJ trouve un fichier nommé \lstinline!FCDstdlib.fcl!, il chargera la bibliothèque standard depuis ce fichier. S'il trouve par contre un fichier nommé \lstinline!PCB.fcl!, il l'utilisera pour la bibliothèque des pastilles pour circuits imprimés.\footnote{Faites attention à la casse des noms de ces fichiers, si votre système d'exploitation fait une différence entre les lettres minuscules et les majuscules.} Les bibliothèques contenues dans d'autres fichiers avec extension \lstinline!.fcl! seront ajoutées à celles standard. 
Tout cela est fait au démarrage de FidoCadJ, donc n'oubliez pas de redémarrer le logiciel si vous y changez quelque chose.

À partir de la version 0.23, grâce à l'accord de Roby IZ1CYN, j'ai pu inclure la bibliothèque IHRaM 2.1 directement à l'intérieur de l'archive contenant FidoCadJ. Cela parce que parmi les nombreuses bibliothèques mises au point par les utilisateurs elle m'a apparue comme la plus complète et rationnelle.
Par contre, si dans le répertoire contenant les bibliothèques externes au logiciel (comme décrit auparavant) on trouve un fichier appelé \lstinline!IHRAM.FCL!, ce dernier sera chargé en mémoire à la place de la version contenue dans FidoCadJ.

\chapter[Le format des dessins FidoCad]{Le format des dessins, des macros et des bibliothèques FidoCad}
\label{chap_formato}

Dans ce chapitre, nous allons décrire en détail le format utilisé par FidoCad et donc aussi par FidoCadJ pour mémoriser les dessins. Il s'agit d'un très simple format de texte qui a l'avantage d'être compact et efficace. Comme ce format n'a jamais été décrit de façon complète, je propose ici un résumé de tout ce que j'ai appris pendant l'étude que j'ai faite.

\section{Description de l'en-tête}
Tous les fichiers qui contiennent un dessin au format FidoCad\index{FidoCad} doivent commencer par l'en-tête standard \lstinline![FIDOCAD]!. 
La présence de cet en-tête indique à un logiciel la présence de commandes FidoCad. En réalité, FidoCadJ est beaucoup plus tolérant que FidoCad\index{FidoCad} et reconnaît et interprète correctement un fichier qui ne présente pas l'en-tête\index{en-tête}.
Même des lignes de commande au milieu du texte sont reconnues correctement, à moins que le nombre de lignes consécutives non lisibles par le logiciel ne dépasse une certaine valeur (environ une centaine). Cette limitation évite que FidoCadJ s'épuise sans fin à essayer d'ouvrir un gros fichier binaire en cas d'erreur de l'utilisateur.

\section{Le système de coordonnées}
FidoCadJ travaille avec un système de coordonnées\index{système de coordonnées} très simple.
En pratique, le logiciel dessine sur une surface très grande (presque sans limites), identifiée par des coordonnées entières et positives. La largeur de chaque unité en $x$ et en $y$ est fixée à $127\micron$, valeur qui dans la pratique s'est avéré suffisante pour décrire les empreintes SMD\index{circuit imprimé!SMD}, sans toutefois être trop petite pour les utilisations les plus courantes.

Le logiciel FidoCad\index{FidoCad} original offrait deux modales différentes: PCB (circuit imprimé)\index{circuit imprimé!PCB} et schéma électrique\index{schéma électrique}.
Avec FidoCadJ, cette différence est beaucoup moins marquée et apparaît seulement au moment d'imprimer un dessin. De fait, si un respect scrupuleux des dimensions d'un circuit imprimé s'impose à l'impression, il est évidemment plus judicieux de régler celles d'un schéma électrique de façon à s'adapter à la surface disponible.

\section{\'Eléments de dessin}
\label{sec_primitive}
FidoCadJ offre 11 primitives de dessin qui sont les suivantes:
\begin{itemize}
\item Ligne \index{ligne}
\item Rectangle plein ou vide \index{rectangle}
\item Texte simple (obsolète) 
\item Texte avancé \index{texte}
\item Polygone plein ou vide \index{polygone}
\item Ellipse pleine ou vide \index{ellipse}
\item Courbe de Bézier \index{Bézier}
\item Connexion électrique \index{connexion}
\item Pastille de circuit imprimé \index{pastille de c. i.} 
\item Piste de circuit imprimé \index{piste de c. i.}
\item Macro\index{macro}
\end{itemize}
Nous allons analyser en détail le format utilisé pour chaque élément.
En général, chaque élément\index{élément} est identifié par une commande suivie par une série de paramètres\index{paramètres} (normalement des entiers ou des chaînes de caractères) sur la même ligne, séparés d'une espace.

\subsubsection{Ligne (segment)}
L'élément ligne\index{ligne}\graffito{Les mathématiciens trouveraient probablement plus approprié le terme \og  segment\fg \index{segment}.} est identifié par la commande \lstinline!LI!\index{LI}, suivie des coordonnées initiales, finales ainsi que du numéro de couche à utiliser:
\begin{lstlisting} 
LI x1 y1 x2 y2 l
\end{lstlisting}
Le point $(x_1, y_1)$ représente les coordonnées initiales, $(x_2, y_2)$ celles finales et $l$ est le numéro du calque, compris entre 0 et 15.

\textbf{Extension FidoCadJ}: à partir de la version 0.23 de FidoCadJ,  \lstinline!LI!\index{LI} peut être suivi à la ligne suivante par une extension:
\begin{lstlisting} 
FCJ a b c d e 
\end{lstlisting}
où $a$ est un entier qui représente la présence ou l'absence de flèches aux extrémités du segment (voir le tableau~\ref{tab_frecce_estremita}), $b$ est un entier qui identifie le style de la flèche à utiliser (voir le tableau~\ref{tab_frecce_stile}). Les paramètres $c$ et $d$ fournissent respectivement la longueur totale et la demi-ouverture de la flèche, tandis que $e$ est le style du trait (interrompu ou continu).
\begin{table}
\centering

\begin{tabular}{ccp{.7\textwidth}}
\toprule
$a$	& Flèche \\
\midrule
0	& aucune \\
1	& au début\\
2	& à la fin\\
3	& aux deux bouts\\
\bottomrule
\end{tabular}
\caption{Présence des flèches aux extrémités d'un segment ou d'un tracé de Bézier, selon la valeur du code $a$.}
\label{tab_frecce_estremita}
\end{table}

\begin{table}
\centering
\begin{tabular}{ccp{.7\textwidth}}
\toprule
$b$	& Style de la flèche \\
\midrule
0	& flèche pleine et normale \\
1	& flèche pleine avec trait \\
2	& flèche vide\\
3	& flèche vide avec trait\\
\bottomrule
\end{tabular}
\caption{Style des flèches, selon la valeur du code $b$.}
\label{tab_frecce_stile}
\end{table}

\subsubsection{Rectangle plein ou vide}
Un rectangle\index{rectangle} plein ou vide est indiqué par la commande  \lstinline!RP!\index{RP} (plein) ou \lstinline!RV!\index{RV} (vide), suivie par les coordonnées des points d'une diagonale du rectangle à tracer, puis par le numéro de la couche à utiliser.
\begin{lstlisting} 
RP x1 y1 x2 y2 l
RV x1 y1 x2 y2 l
\end{lstlisting}
les coordonnées $(x_1, y_1)$ sont celles du premier point de la diagonale, $(x_2, y_2)$ le deuxième point et $l$ est le numéro du calque, compris entre 0 et 15.

\textbf{Extension FidoCadJ}: à partir de la version 0.23 de FidoCadJ,  \lstinline!RP!\index{RP} et \lstinline!RV!\index{RV} peuvent être suivis par une extension comme dans la ligne suivante:
\begin{lstlisting} 
FCJ e 
\end{lstlisting}
où $e$ est un entier qui fournit le style à utiliser pour le trait.

\subsubsection{Texte simple (obsolète)}
Le texte simple\index{texte simple} a été le premier élément de texte mis à disposition par les premières versions de FidoCad\index{FidoCad}.

Cet élément de dessin a été considéré obsolète\index{obsolète} par Lorenzo Lutti\index{Lorenzo Lutti}, le créateur de FidoCad\index{FidoCad}. FidoCadJ se comporte de la même façon et, même si des dessins qui utilisent cet élément sont visualisés correctement, l'utilisateur ne peut pas l'introduire à partir de la barre des commandes. FidoCadJ convertira en interne cette commande en l'élément \og  texte avancé\fg  et il utilisera la commande \lstinline!TY!\index{TY} lors de la sauvegarde du fichier.

La commande utilisée est \lstinline!TE!\index{TE} et le format est le suivant:
\begin{lstlisting} 
TE x1 y1 £texte à écrire
\end{lstlisting}
Le point $(x_1, y_1)$ définit la position du texte \og  texte à écrire\fg . Nous pouvons remarquer que l'indication du calque n'apparaît pas. FidoCadJ traitera cet objet comme appartenant au calque zéro (circuit\index{circuit}).

\subsubsection{Texte avancé}
L'élément texte avancé\index{texte avancé} permet une flexibilité bien plus grande par rapport à l'élément texte simple\index{texte simple} que l'on vient de voir.

Cet élément est identifié par la commande \lstinline!TY!\index{TY}, suivie par plusieurs paramètres qui spécifient l'orientation du texte (texte pivoté\index{texte pivoté}, ou en miroir\index{texte en miroir}), ainsi que les dimensions en $x$ et en $y$ de la police utilisée.
Comme il commence à y avoir pas mal d'informations à fournir, la ligne de commande est plutôt fournie:
\begin{lstlisting} 
TY x1 y1 sy sx a s l f £texte à écrire
\end{lstlisting}
Le point $(x_1, y_1)$ définit la position du texte \og  texte à écrire\fg .
Les valeurs de $s_y$ et $s_x$ indiquent les dimensions verticale et horizontale du texte en unités logiques\index{unités logiques}. J'ai choisi de faire en sorte que FidoCadJ calcule la dimension verticale du texte à partir de celle horizontale, et qu'il applique des déformations à la police seulement si strictement nécessaire.

La rotation du texte est précisée par le terme $a$, exprimé en degrés, tandis que la valeur de $s$ détermine le style du texte\index{style du texte}, selon le tableau~\ref{tab_stile_testo}.
La couche utilisée est représentée par le terme $l$, tandis que  $f$ indique la police à utiliser, ou est remplacé par une étoile\index{étoile}, pour indiquer l'utilisation de la police standard, qui est Courier New\index{Courier~New}.
Si le nom de la police contient des espaces, ces dernières sont remplacées par le symbole +\index{+}.


%\begin{figure}
%\centering
%\includegraphics[width=0.4\textwidth]{courier_sample}
%\caption{Un exemple de la police Courier, utilisée par FidoCadJ.}
%\label{fig_courier_sample}
%\end{figure}

\begin{table}
\centering
\begin{tabular}{llp{.7\textwidth}}
\toprule
Bit
&
Poids
&
Fonction
\\
\midrule
0
&
1
&
Texte en noir
\\
2
&
4
&
Texte en miroir
\\

\bottomrule
\end{tabular}
\caption{Fonctions des bits dans le style du texte.}
\label{tab_stile_testo}
\end{table}

La longueur maximale du texte\index{longueur maximale du texte} est d'environ quatre vingt mots. Le compte est effectué en mots, et non pas en caractères, car dans la structure interne du logiciel les mots sont séparés lorsque le dessin est chargé en mémoire.

\subsubsection{Polygone plein ou vide}
Un polygone\index{polygone} plein ou vide est indiqué respectivement par les commandes \lstinline!PP!\index{PP} et \lstinline!PV!\index{PV}, suivies par les coordonnées des sommets du polygone, et la couche.
\begin{lstlisting} 
PP x1 y1 x2 y2 ... l
PV x1 y1 x2 y2 ... l
\end{lstlisting}
les points $(x_1, y_1)$, $(x_2, y_2)$\dots sont les coordonnées des sommets qui définissent le polygone et $l$ est le numéro du calque, indiqué avec un nombre compris entre 0 et 15.
La longueur totale de la ligne est donc variable et dépend du nombre de sommets qui sont présents. Pour éviter des lignes trop longues, le nombre maximum de sommets\index{nombre maximum de sommets} est fixé arbitrairement à 20.

\textbf{Extension FidoCadJ}: à partir de la version 0.23 de FidoCadJ,  \lstinline!PP!\index{PP} et \lstinline!PV!\index{PV} peuvent être suivis par une extension comme dans la ligne suivante:
\begin{lstlisting} 
FCJ e 
\end{lstlisting}
où $e$ est un entier qui fixe le style à utiliser pour le trait.

\subsubsection{Ellipse pleine ou vide}
Une ellipse\index{ellipse} pleine ou vide est indiquée respectivement par les commandes \lstinline!EP!\index{EP} et \lstinline!EV!\index{EV}, suivies des coordonnées des extrémités d'une diagonale puis par le numéro de la couche:
\begin{lstlisting} 
EP x1 y1 x2 y2 l
EV x1 y1 x2 y2 l
\end{lstlisting}
Le point $(x_1, y_1)$ représente le premier point de la diagonale et $(x_2, y_2)$ le deuxième. Le terme $l$, entier compris entre 0 et 15, est le numéro de la couche.

\textbf{Extension FidoCadJ}: à partir de la version 0.23 de FidoCadJ,  \lstinline!EP!\index{EP} et \lstinline!EV!\index{EV} peuvent être suivis par une extension comme dans la ligne suivante:
\begin{lstlisting} 
FCJ e 
\end{lstlisting}
où $e$ est un entier qui fournit le style à utiliser pour le trait.

\subsubsection{Courbe de Bézier}
Une courbe de Bézier\index{Bézier}, dans sa variante cubique, est identifiée par quatre points qui sont donc requis par la commande \lstinline!BE!\index{BE}:
\begin{lstlisting} 
BE x1 y1 x2 y2 x3 y3 x4 y4 l
\end{lstlisting}
Les points $P_1\equiv (x_1, y_1)$,  $P_2\equiv (x_2, y_2)$,  $P_3\equiv(x_3, y_3)$ et  $P_4\equiv (x_4, y_4)$ sont les quatre points de contrôle de la courbe de Bézier\index{Bézier}, tandis que $l$ est le numéro de la couche, identifiée par un entier compris entre 0 et 15.
Une fois fixés les quatre points que l'on vient de voir, la courbe est donnée par l'équation suivante, qui effectue une combinaison entre les différents points:
\begin{equation}
B(t)=(1-t)^3P_1+3t(1-t)^2P_2+3t^2(1-t)P_3+t^3P_4
\end{equation}
où le terme $t\in [0,1]$ est un paramètre.

\textbf{Extension FidoCadJ}: à partir de la version 0.23 de FidoCadJ,  \lstinline!BE!\index{BE} peut être suivi à la ligne suivante par une extension:
\begin{lstlisting} 
FCJ a b c d e 
\end{lstlisting}
où $a$ est un entier qui représente la présence ou l'absence de flèches aux extrémités du segment (voir le tableau~\ref{tab_frecce_estremita}), $b$ est un entier qui identifie le style de la flèche à utiliser (voir le tableau~\ref{tab_frecce_stile}). Les paramètres $c$ et $d$ fournissent respectivement la longueur totale et la demi-ouverture de la flèche, tandis que $e$ est le style du trait (interrompu ou pas).

\subsubsection{Connexion électrique}
L'élément connexion électrique\index{connexion} est tout simplement un petit cercle plein de dimension constante et il est utilisé pour représenter une connexion entre deux fils dans un schéma électrique. Il est caractérisé par la commande \lstinline!SA!\index{SA} et nécessite uniquement des coordonnées, ainsi que la couche:
\begin{lstlisting} 
SA x1 y1 l
\end{lstlisting}
Avec FidoCadJ, le diamètre du cercle est fixé à 2 unités logiques et ne peut pas être modifié par l'utilisateur.

\subsubsection{Pastille de circuit imprimé}
Une pastille de circuit imprimé\index{pastille de c. i.} est identifiée par la commande  \lstinline!PA!\index{PA} et  est caractérisée par son style (rond, rectangulaire, rectangulaire avec les coins arrondis), ainsi que par la dimension du trou interne:
\begin{lstlisting} 
PA x1 y1 dx dy si st l
\end{lstlisting}
Le point $(x_1, y_1)$ va nous donner la position de la pastille,  $d_x$ et $d_y$ sont la largeur et la hauteur de la pastille. La valeur de $s_\mathrm{i}$ fixera le diamètre du trou et $s_\mathrm{t}$ le style de la pastille:
\begin{itemize}
\item[0] pastille ovale
\item[1] pastille circulaire
\item[2] pastille rectangulaire avec les coins arrondis
\end{itemize}
La valeur de $l$ indique le numéro de la couche où la pastille sera tracée.

\subsubsection{Piste de circuit imprimé}
La piste de circuit imprimé\index{piste de c. i.} n'est en gros rien d'autre qu'un segment dont on peut spécifier la largeur. Les extrémités du segment sont toujours arrondies, pour simplifier la connexion avec les autres pistes du circuit. La commande à utiliser est \lstinline!PL!\index{PL}, avec le format qui suit:
\begin{lstlisting} 
PL x1 y1 x2 y2 di l
\end{lstlisting}
La piste est tracée entre les points $(x_1, y_1)$ e $(x_2, y_2)$, avec l'épaisseur $d_\mathrm{i}$, sur la couche $l$.

\subsubsection{Macro}
Une macro\index{macro} est un dessin ou un symbole présent à l'intérieur d'une bibliothèque. Très typiquement, les symboles électriques les plus utilisés sont représentés de cette façon.
La commande à utiliser pour introduire une macro est \lstinline!MC!\index{MC}, en respectant la structure suivante:
\begin{lstlisting} 
MC x1 y1 o m n
\end{lstlisting}
La macro est dessinée aux coordonnées $(x_1, y_1)$, avec un angle défini par la valeur de $o$ (fois 90°). Si $m$ vaut 1, la macro est tracée en miroir. Le dernier paramètre, $n$ est le nom de la macro, exprimé sous la forme \lstinline!bibliothèque.clé!. Il y a une exception importante à cette règle pour les éléments de la bibliothèque standard (et seulement pour eux!), où la macro est appelée seulement par sa clé.

\textbf{Extension FidoCadJ}: à partir de la version 0.21 de FidoCadJ, \lstinline!MC!\index{MC} peut être suivi par un code \lstinline!FCJ! à la ligne suivante:
\begin{lstlisting} 
[FIDOCAD]
MC 40 30 0 0 080
FCJ
TY 50 35 4 3 0 0 0 * R1
TY 50 40 4 3 0 0 0 * 47k
\end{lstlisting}

La présence de cette commande indique que la définition de la macro n'est pas terminée, mais qu'il y a des informations en plus concernant le nom et la valeur de la macro, spécifiés à l'aide de deux commandes \lstinline!TY!. Actuellement (0.23), FidoCadJ prend en compte les coordonnées, le texte ainsi que la police utilisée.

Cette façon de procéder a l'avantage que si un fichier contenant des extensions est lu par FidoCad\index{FidoCad}, ce dernier fournira un message d'erreur, mais lira correctement le schéma (voir le paragraphe~\ref{FCJ_extension}).

\section{Extensions de FidoCadJ}
\label{FCJ_extension}

À partir de la version 0.21, FidoCadJ a introduit des extensions\index{extension FidoCadJ} au format FidoCad originel. Dans le code, ces extensions sont identifiées par la commande \lstinline!FCJ!\index{FCJ}. La présence de cette commande indique que l'instruction précédente n'est pas terminée, mais qu'il faut fournir davantage d'informations.

FidoCadJ introduit à partir de la version 0.23 des extensions plus importantes, mais dispose en revanche d'un mode de \og  compatibilité avec FidoCad\fg  qui est contrôlable sous l'onglet \og  Extensions FidoCadJ\fg  à l'intérieur de la fenêtre \og  Préférences\fg \index{extensions FidoCadJ}. Si ce mode est activé, toutes les extensions propres à FidoCadJ sont désactivées et le dessin sera parfaitement compatible avec FidoCad\index{FidoCad} pour Windows.
Dans le cas contraire, FidoCad\index{FidoCad} sera encore capable de lire les schémas produits par FidoCadJ (malgré l'émission d'un message d'erreur), mais les informations sans signification pour lui seront perdues.

Le résultat dépendra du contexte: une ligne dessinée à trait interrompu sera rendue comme une ligne continue. Les flèches qui étaient associées aux extrémités ne seront pas dessinées. Par contre, le texte associé à une macro (nom et valeur) sera affiché correctement. La figure~\ref{fig_gyrator_n} devrait résumer ce qu'on obtient quand on lit avec FidoCad le code utilisé pour dessiner la figure~\ref{fig_gyrator}. FidoCad est un peu énervé à cause des commandes qu'il ne reconnaît pas, il y a des détails qui manquent mais le dessin demeure compréhensible.

\begin{figure}
\includegraphics[width=\textwidth]{gyrator_n}
\caption{La figure~\ref{fig_gyrator} telle que l'afficherait FidoCad.}
\label{fig_gyrator_n}
\end{figure}

\'A différence de FidoCad, FidoCadJ permet de sauvegarder un certain nombre d'informations relatives à la configuration du logiciel directement à l'intérieur des dessins produits. La commande utilisée est \lstinline!FJC!\index{FJC} et est normalement émise vers le début du fichier. Les possibilités sont traitées dans les paragraphes qui suivent.

\subsection{Configuration des couches}
La configuration des couches est faite à travers la commande \lstinline!FJC L!\index{FJC L}. On sauvegarde des informations seulement si la couche a été modifiée par rapport à sa configuration standard.
\begin{lstlisting}
FJC L n xxxx yy
\end{lstlisting}
où $n$ représente le numéro de la couche à utiliser (entre 0 et 15), $xxxx$ est un entier à 32 bits contenant les informations sur la couleur RGB. La composante rouge est contenue dans les bits 16-23, la composante verte dans les bits 8-15 et celle bleu dans les bits 0-7.
La valeur $yy$, décimale à précision simple, représente la transparence de la couche, comprise entre 0,0 (parfaitement transparent) et 1,0 (parfaitement opaque).

\subsection{Configuration connexion électrique}
La dimension du petit rond qui est utilisé pour indiquer une connexion électrique peut être modifiée dans FidoCadJ. Pendant que les extensions FidoCadJ sont actives, la valeur choisie est sauvegardée dans le fichier avec la commande \lstinline!FJC C!\index{FJC C} comme il suit:
\begin{lstlisting}
FJC C aaaa
\end{lstlisting}
où $aaaa$ est une valeur décimale, à précision double, qui représente la taille du rond en unités logiques.

\subsection{Configuration largeur du trait}
La largeur du trait qui est utilisé pour le dessin des schémas électriques peut être modifiée. FidoCadJ différencie parmi le trait utilisé pour les segments (primitive \lstinline!LI!) et les courbes (primitives \lstinline!EV! e \lstinline!BE!). Le premier cas est traité par la commande \lstinline!FJC A!\index{FJC A}, tandis que le deuxième est spécifié par la commande \lstinline!FJC B!\index{FJC B}:
\begin{lstlisting}
FJC A aaaa
FJC B bbbb
\end{lstlisting}
où $aaaa$ et $bbbb$ sont des constantes décimales, à précision double, qui représentent respectivement la largeur du trait (en unités logiques) à utiliser pour le dessins des segments et des courbes. La valeur par défaut de FidoCadJ est fixée à 0,5 unités logiques.

\section{Tolérance aux erreurs de syntaxe}
FidoCadJ a été écrit pour être particulièrement tolérant aux erreurs\index{tolérance aux fautes} et aux commandes incomplètes. Clairement, à moins que vous ayez une boule de cristal USB\index{boule de cristal USB}, le logiciel ne pourra pas corriger les erreurs et il se limitera à sauter les lignes qui posent problème ou sont incomplètes.

Une exception à ce comportement est due au fait que, pour des raisons de compatibilité avec les toutes premières versions de FidoCad \index{FidoCad}, certains éléments peuvent être spécifiés en omettant la couche\index{couche} à utiliser.
Ils seront dans ce cas considérés comme faisant partie de la couche 0, destinée au dessin des schémas électriques.

\section{Le format des bibliothèques}
La structure d'un fichier de bibliothèque est très simple:

\begin{lstlisting} 
[FIDOLIB Librairie de base]
{Symboles de base}
[000 Terminal]
LI 100 100 102 100
EV 102 98 106 102
[010 Terminal +]
LI 100 100 102 100
EV 102 98 106 102
LI 103 100 105 100
LI 104 99 104 101
[020 Terminal -]
LI 100 100 102 100
EV 102 98 106 102
LI 103 100 105 100
...
\end{lstlisting}
La première ligne indique, entre crochets\index{crochets}, le nom de la bibliothèque (après le texte FIDOLIB\index{FIDOLIB}). La deuxième ligne fournit, entre accolades, la catégorie de la bibliothèque à l'intérieur de laquelle nous allons organiser les macros qui vont suivre dans le fichier.

Chaque macro est composée d'un en-tête\index{en tête} (entre crochets) suivi d'une suite de commandes de dessin. L'en-tête est composé de la clé (qui \textsl{doit} être unique dans chaque bibliothèque) et d'une description. La clé est utilisée à l'intérieur du code FidoCad, tandis que la description sert à guider l'utilisateur dans son choix pendant l'utilisation du logiciel.
Une macro n'est rien d'autre qu'un dessin FidoCad autour du point (100, 100) utilisé comme origine. Cette origine sera ensuite utilisée comme point de base pour le positionnement de la macro. La macro sera utilisée à l'aide de la commande MC\index{MC}, avec le code \og  bibliothèque.macro\fg .

Rien n'empêche d'employer une macro à l'intérieur d'une autre macro. Il faut par contre éviter la récursion\index{récursion}, c'est à dire une macro faisant appel à elle même.


\section{Bibliothèques standard}
FidoCadJ inclut plusieurs bibliothèques fournies traditionnellement avec FidoCad\index{FidoCad}. 
En particulier, il s'agit de la bibliothèque standard\index{bibliothèque standard} et de la bibliothèque dédiée aux symboles des composants pour les circuits imprimés (PCB)\index{bibliothèque PCB}.

Il est néanmoins possible d'ignorer le contenu des bibliothèques internes à FidoCadJ, en spécifiant au logiciel (menu \og  Vue/Options/Répertoire bibliothèques\fg )  un répertoire contenant les bibliothèques à charger.
Si un fichier nommé \lstinline!FCDstdlib.fcl! est présent dans ce répertoire, son contenu sera utilisé à la place de la bibliothèque standard. Si par contre un fichier nommé \lstinline!PCB.fcl! est présent, son contenu sera utilisé à la place de la bibliothèque contenant les symboles pour les circuits imprimés.
Les bibliothèques contenues dans des fichiers porteurs d'un nom différent mais dotés de l'extension \lstinline!fcl! seront chargées en complément des bibliothèques standard.

\chapter{Conclusion}
Dans ce manuel, nous avons vu comment utiliser FidoCadJ pour dessiner un schéma électrique et un simple circuit imprimé. À ce stade, le lecteur devrait posséder tous les éléments nécessaires pour utiliser de façon créative FidoCadJ pour ses exigences.

Il ne faut pas croire que FidoCadJ est un instrument dédié seulement à l'électronique. En préparant des bibliothèques spécifiques, il devient possible de l'utiliser pour une variété très grande de dessins bi-dimensionnels.

Il est très important que les utilisateurs puissent communiquer avec moi (en particulier, pour savoir dans quelle direction continuer le développement). N'hésitez donc pas à me contacter (\href{mailto:davbucci@tiscali.it}{davbucci@tiscali.it}, mais sans aucun type de fichier joint!).


\appendix

\chapter{Extensions spécifiques aux systèmes d'exploitation}
\label{specifics}
\section{MacOSX}
\subsection{Extensions}
Une des critiques les plus courantes faites aux premières versions de FidoCadJ de la part des utilisateurs Macintosh (comme moi, du reste) concerne la mauvaise intégration de ce logiciel sous MacOSX. \`A partir de la version 0.21.1, FidoCadJ a fait des efforts spécifiques pour s'intégrer à l'apparence et au fonctionnement des applications natives.
Pour cette raison, certaines fonctionnalités du logiciel sont légèrement différentes lorsque FidoCadJ se rend compte qu'il est exécuté sur une plate-forme Apple:
\begin{itemize}
\item FidoCadJ utilise par défaut le \textit{look and feel} Quaqua\footnote{Quaqua est disponible à l'adresse: \href{http://www.randelshofer.ch/quaqua/}{http://www.randelshofer.ch/quaqua/}}\index{Quaqua} quand il est lancé à partir de l'application complète (FidoCadJ.app\index{FidoCadJ.app}, donc pas à partir du fichier fidocadj.jar\index{fidocadj.jar}). Quaqua pourrait introduire des ralentissements sur des ordinateurs pas très récents. Pour cette raison, il est possible de le désactiver à partir de la fenêtre Préférences.
\item La barre du menu se trouve à sa place, c'est à dire dans la partie haute de l'écran.
\item Les entrées \og  Préférences\dots\fg  et \og  \`A propos de FidoCadJ\fg  se trouvent à leur place, c'est à dire à l'intérieur du menu \og  FidoCadJ\fg .
\item Le logiciel déclare au système d'exploitation qu'il est en mesure d'ouvrir les fichiers de type \lstinline!.fcd!. Il y associe aussi une icône évocatrice.
\end{itemize}

\subsection{Comment télécharger et exécuter FidoCadJ sous MacOSX}
FidoCadJ peut fonctionner avec une version de MacOSX\index{MacOSX} supérieure ou égale à la version 10.3.9 (Panther\index{Panther}). La raison en est que FidoCadJ demande une version de Java supérieure à la 1.4. Apple fournit normalement tout ce qu'il faut pour exécuter une application Java à l'intérieur de son système d'exploitation vedette.

Même s'il est tout à fait possible de télécharger et utiliser le fichier \lstinline!fidocad.jar! comme on le fait avec d'autres systèmes d'exploitation, il est plutôt indiqué d'utiliser l'application que j'ai mise à disposition exprès pour ce système.
Tout est tout à fait identique aux applications natives; il suffit de télécharger l'image disque qui contient le logiciel à l'adresse suivante: \\
{\small
\href{http://sourceforge.net/projects/fidocadj/files/FidoCadJ.dmg/download}{http://sourceforge.net/projects/fidocadj/files/FidoCadJ.dmg/download}}\\ ouvrir l'image disque et déplacer \lstinline!FidoCadJ.app! à l'intérieur du dossier \lstinline!Applications!, où il sera disponible comme tout autre logiciel installé dans le système.
Pour désinstaller FidoCadJ, il suffira de déplacer \lstinline!FidoCadJ.app! dans la corbeille.

\section{Linux}
\subsection{Extensions}
Sous Linux\index{Linux}, le logiciel ne prévoit pas d'extensions spécifiques.

\subsection{Comment télécharger et exécuter FidoCadJ sous un système Linux}
\label{installazione_linux}
\textsl{par Roby Pozzato IZ1CYN}\\

Prérequis: avoir installé le JRE\index{JRE} 6 de Sun\index{Sun} et/ou OpenJDK\index{OpenJDK} 6 JRE\index{JRE} (ou les versions précédentes compatibles avec ce que demande FidoCadJ).
Au le paragraphe \ref{inst_testo}, nous allons décrire comment installer le logiciel en utilisant seulement des commandes à fournir dans une invite de commandes. Au le paragraphe \ref{inst_grafica}, nous allons voir ce qu'il faut faire dans un système pourvu d'une interface graphique.


\subsection{Sous n'importe quel système, depuis l'invite de commande}
\label{inst_testo}
Téléchargeons le logiciel en utilisant la commande \lstinline!wget!:

%\lstset{language=plain,basicstyle=\tiny\ttfamily}

\begin{lstlisting}
$ wget http://downloads.sourceforge.net/project/fidocadj/fidocadj.jar?use_mirror=garr
--00:48:18--  http://downloads.sourceforge.net/project/fidocadj/fidocadj.jar?use_mirror=garr
           => `fidocadj.jar?use_mirror=garr'
Resolution of downloads.sourceforge.net is being done... 216.34.181.59
Connection to downloads.sourceforge.net|216.34.181.59:80... connected.
HTTP request sent, waiting for answer... 302 Found
URL: http://garr.dl.sourceforge.net/project/fidocadj/fidocadj.jar
--00:48:24--  http://garr.dl.sourceforge.net/project/fidocadj/fidocadj.jar
           => `fidocadj.jar'
Resolution of garr.dl.sourceforge.net in corso... 193.206.140.34
Connection to garr.dl.sourceforge.net|193.206.140.34:80... connesso.
HTTP request sent, waiting for answer... 200 OK
Length: 343,207 (335K) [application/java-archive]

100%[====================================>] 343,207      422.48K/s             

00:48:30 (420.55 KB/s) - "fidocadj.jar" saved [343207/343207]
$
\end{lstlisting}
\lstset{
	basicstyle=\small\ttfamily}

Ou, en cas de problèmes, télécharger le fichier d'après l'adresse suivante:

\href{http://sourceforge.net/projects/fidocadj/files/fidocadj.jar/download}{http://sourceforge.net/projects/fidocadj/files/fidocadj.jar/download}

pour ensuite le sauvegarder dans son répertoire \lstinline!/home/!.

Créons un répertoire (mais tout d'abord devenons super-utilisateur\index{super-utilisateur} avec la commande \lstinline!su! ou \lstinline!sudo -s!)


\begin{lstlisting}
# mkdir /usr/bin/fidocadj
\end{lstlisting}

\dots et déplaçons y le fichier précédemment téléchargé (remplacez \lstinline!<user>! par votre nom de l'utilisateur):

\begin{lstlisting}
# mv /home/<user>/fidocadj.jar /usr/bin/fidocadj
\end{lstlisting}

Rendons ce fichier exécutable:

\begin{lstlisting}
# chmod +x /usr/bin/fidocadj/fidocadj.jar
\end{lstlisting}

Et n'oublions pas de redevenir un utilisateur normal!

\begin{lstlisting}
# exit
\end{lstlisting}

Maintenant, nous pouvons lancer le logiciel:

\begin{lstlisting}
$ /usr/bin/fidocadj/fidocadj.jar
\end{lstlisting}
%

\subsection{Sous un système graphique}
\label{inst_grafica}
Dans notre exemple, nous allons décrire ce qu'il faut faire pour une distribution Ubuntu\index{Ubuntu} 8.04. Pour des versions antérieures ou postérieures, ou bien sous d'autres distributions, seuls quelques détails peuvent différer.

\begin{itemize}
\item {Nous pouvons télécharger le fichier avec le navigateur Internet, voire avec des outils tels que Gwget.}
\item {Démarrons notre outil de gestion de fichiers (Nautilus, Konqueror, etc.) en tant que super-utilisateur. S'il n'y a pas une option ad-hoc pour effectuer cela dans les menus, il suffit de le lancer à partir de l'invite des commandes avec \lstinline!sudo nautilus!). Créons le répertoire \lstinline!/usr/bin/fidocadj! et  déplaçons y le fichier précédemment téléchargé (vous seul savez où vous venez de le mettre.)}

\begin{figure}
\centering
\includegraphics[width=.8\textwidth]{permessi}
\caption{La fenêtre de gestion des permissions, sous la distribution Ubuntu\index{Ubuntu} 8.04.}
\label{fig_permessi}
\end{figure}

\item {Un clic droit sur le fichier ouvre un menu contextuel. Sélectionnons l'onglet \og  Permissions\fg  et optons pour \og  Permettre l'exécution du fichier en tant que logiciel\fg , ainsi que le montre la figure~\ref{fig_permessi}.}

\begin{figure}
\centering
\includegraphics[width=.8\textwidth]{java6}
\caption{Sélectionner l'exécution de la machine virtuelle Java, dans la distribution Ubuntu\index{Ubuntu} 8.04.}
\label{fig_java6}
\end{figure}

\item {Sélectionnons l'onglet \og  Ouvrir avec\fg  et choisissons \og  OpenJDK Java 6 Runtime\fg  ou \og  Sun Java 6 Runtime\fg , comme représenté figure~\ref{fig_java6}.}\footnote{On m'a signalé qu'en utilisant le \textit{runtime} OpenJDK, on risque d'avoir des problèmes lors de l'impression sur des imprimantes qui utilisent des pilotes CUPS. Si vous avez des problèmes, faites des tests sur d'autres systèmes telles que Sun JRE 1.4.2, si disponible.}

\item {Cliquons sur \og  Fermer\fg  et nous sommes prêt à exécuter FidoCadJ d'un double clic sur l'exécutable. Alternativement, nous pouvons le rajouter au menu; la commande à utiliser est tout simplement: \lstinline!/usr/bin/fidocadj/fidocadj.jar!.}
\end{itemize}


\section{Windows}
À partir de la version 0.23, si FidoCadJ est exécuté sous Windows, on utilise par défaut le \textit{look and feel}  destiné à ce système d'exploitation.


\manualmark 
\markboth{\spacedlowsmallcaps{\indexname}}% 
{\spacedlowsmallcaps{\indexname}} 
\refstepcounter{dummy} 
\pagestyle{scrheadings} 
\addcontentsline{toc}{chapter}{\tocEntry{\indexname}} 
\printindex 
\cleardoublepage
\thispagestyle{empty}
\mbox{ }
\vfill
Ce manuel a été rédigé en utilisant \textsc{pdf}\LaTeX\ sous MacOSX, en adoptant la classe \href{http://www.ctan.org/tex-archive/macros/latex/contrib/classicthesis/}{classicthesis}.
Le code a été mis en page en utilisant le paquet \href{http://www.ctan.org/tex-archive/macros/latex/contrib/listings/}{listings}. Le paquet \href{http://www.ctan.org/tex-archive/graphics/pgf/}{pgf}\ a été utilisé pour la figure~\ref{fig_schema}. Les paquets sont disponibles dans l'archive CTAN.

Ce travail a été composé avec la police \emph{Palatino}, de Hermann Zapf. 
\end{document}
